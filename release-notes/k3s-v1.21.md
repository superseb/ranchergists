| Version | Date | US date | EU date |
| ------- | ---- | ------- | ------- |
| [v1.21.14+k3s1](k3s-v1.21#release-v12114k3s1) | Jun 27 2022 | 06/27/22 | 2022-06-27 |
| [v1.21.13+k3s1](k3s-v1.21#release-v12113k3s1) | Jun 11 2022 | 06/11/22 | 2022-06-11 |
| [v1.21.12+k3s1](k3s-v1.21#release-v12112k3s1) | Apr 28 2022 | 04/28/22 | 2022-04-28 |
| [v1.21.11+k3s1](k3s-v1.21#release-v12111k3s1) | Mar 31 2022 | 03/31/22 | 2022-03-31 |
| [v1.21.10+k3s1](k3s-v1.21#release-v12110k3s1) | Feb 24 2022 | 02/24/22 | 2022-02-24 |
| [v1.21.9+k3s1](k3s-v1.21#release-v1219k3s1) | Jan 25 2022 | 01/25/22 | 2022-01-25 |
| [v1.21.8+k3s2](k3s-v1.21#release-v1218k3s2) | Jan 14 2022 | 01/14/22 | 2022-01-14 |
| [v1.21.8+k3s1](k3s-v1.21#release-v1218k3s1) | Dec 18 2021 | 12/18/21 | 2021-12-18 |
| [v1.21.7+k3s1](k3s-v1.21#release-v1217k3s1) | Nov 29 2021 | 11/29/21 | 2021-11-29 |
| [v1.21.6+k3s1](k3s-v1.21#release-v1216k3s1) | Nov 04 2021 | 11/04/21 | 2021-11-04 |
| [v1.21.5+k3s2](k3s-v1.21#release-v1215k3s2) | Oct 05 2021 | 10/05/21 | 2021-10-05 |
| [v1.21.5+k3s1](k3s-v1.21#release-v1215k3s1) | Sep 20 2021 | 09/20/21 | 2021-09-20 |
| [v1.21.4+k3s1](k3s-v1.21#release-v1214k3s1) | Aug 19 2021 | 08/19/21 | 2021-08-19 |
| [v1.21.3+k3s1](k3s-v1.21#release-v1213k3s1) | Jul 22 2021 | 07/22/21 | 2021-07-22 |
| [v1.21.2+k3s1](k3s-v1.21#release-v1212k3s1) | Jun 21 2021 | 06/21/21 | 2021-06-21 |
| [v1.21.1+k3s1](k3s-v1.21#release-v1211k3s1) | May 21 2021 | 05/21/21 | 2021-05-21 |
| [v1.21.0+k3s1](k3s-v1.21#release-v1210k3s1) | Apr 26 2021 | 04/26/21 | 2021-04-26 |



# Release v1.21.14+k3s1
<!-- v1.21.14+k3s1 -->
This release updates Kubernetes to v1.21.14, and fixes a number of issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v12113).

## Changes since v1.21.13+k3s1:

* The embedded etcd snapshot controller will no longer fail to process snapshot files containing characters that are invalid for use in ConfigMap keys. [(#5705)](https://github.com/k3s-io/k3s/pull/5705)
* Delay service readiness until after startuphooks have finished [(#5725)](https://github.com/k3s-io/k3s/pull/5725)
* Update to v1.21.14-k3s1 [(#5753)](https://github.com/k3s-io/k3s/pull/5753)

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.14](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v12114) |
| Kine | [v0.6.5](https://github.com/k3s-io/kine/releases/tag/v0.6.5) |
| SQLite | [3.36.0](https://sqlite.org/releaselog/3_36_0.html) |
| Etcd | [v3.4.18-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.18-k3s1) |
| Containerd | [v1.4.13-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.13-k3s1) |
| Runc | [v1.0.0](https://github.com/opencontainers/runc/releases/tag/v1.0.0) |
| Flannel | [v0.16.3](https://github.com/flannel-io/flannel/releases/tag/v0.16.3) | 
| Metrics-server | [v0.5.2](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.2) |
| Traefik | [v2.6.1](https://github.com/traefik/traefik/releases/tag/v2.6.1) |
| CoreDNS | [v1.9.1](https://github.com/coredns/coredns/releases/tag/v1.9.1) | 
| Helm-controller | [v0.10.8](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.8) |
| Local-path-provisioner | [v0.0.21](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.21) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)

-----
# Release v1.21.13+k3s1
<!-- v1.21.13+k3s1 -->
This release updates Kubernetes to v1.21.13, and fixes a number of issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v12112).

## Changes since v1.21.12+k3s1:

* Update to v1.21.13-k3s1 [(#5610)](https://github.com/k3s-io/k3s/pull/5610)

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.13](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v12113) |
| Kine | [v0.6.5](https://github.com/k3s-io/kine/releases/tag/v0.6.5) |
| SQLite | [3.36.0](https://sqlite.org/releaselog/3_36_0.html) |
| Etcd | [v3.4.18-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.18-k3s1) |
| Containerd | [v1.4.13-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.13-k3s1) |
| Runc | [v1.0.0](https://github.com/opencontainers/runc/releases/tag/v1.0.0) |
| Flannel | [v0.16.3](https://github.com/flannel-io/flannel/releases/tag/v0.16.3) | 
| Metrics-server | [v0.5.2](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.2) |
| Traefik | [v2.6.1](https://github.com/traefik/traefik/releases/tag/v2.6.1) |
| CoreDNS | [v1.9.1](https://github.com/coredns/coredns/releases/tag/v1.9.1) | 
| Helm-controller | [v0.10.8](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.8) |
| Local-path-provisioner | [v0.0.21](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.21) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)
-----
# Release v1.21.12+k3s1
<!-- v1.21.12+k3s1 -->
This release updates Kubernetes to v1.21.12, and fixes a number of issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v12111).

## Changes since v1.21.11+k3s1:

* Wireguard native flannel support [(#5411)](https://github.com/k3s-io/k3s/pull/5411)
* update trivy to 0.25.3 [(#5425)](https://github.com/k3s-io/k3s/pull/5425)
* Backport cluster join fixes from master [(#5441)](https://github.com/k3s-io/k3s/pull/5441)
    * When using clusters with a mix of etcd-only/control-plane-only nodes, agents may now also join etcd-only servers
    * Fixed an issue that caused k3s to crash on startup when converting a node from agent to server. 
* netpol: Add dual-stack support [(#5417)](https://github.com/k3s-io/k3s/pull/5417)
* etcd-only nodes will now transition to the `running` state in systemd as soon as etcd is up. [(#5448)](https://github.com/k3s-io/k3s/pull/5448)
* Update Kubernetes to v1.21.12 [(#5472)](https://github.com/k3s-io/k3s/pull/5472)
* Fix issue with long-running apiserver endpoints watch [(#5481)](https://github.com/k3s-io/k3s/pull/5481)
* Secrets Encryption: Add RetryOnConflict around updating nodes [(#5497)](https://github.com/k3s-io/k3s/pull/5497)

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.12](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v12112) |
| Kine | [v0.6.5](https://github.com/k3s-io/kine/releases/tag/v0.6.5) |
| SQLite | [3.36.0](https://sqlite.org/releaselog/3_36_0.html) |
| Etcd | [v3.4.18-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.18-k3s1) |
| Containerd | [v1.0.0](https://github.com/k3s-io/containerd/releases/tag/v1.0.0) |
| Runc | [v1.0.0](https://github.com/opencontainers/runc/releases/tag/v1.0.0) |
| Flannel | [v0.16.3](https://github.com/flannel-io/flannel/releases/tag/v0.16.3) | 
| Metrics-server | [v0.5.2](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.2) |
| Traefik | [v2.6.1](https://github.com/traefik/traefik/releases/tag/v2.6.1) |
| CoreDNS | [v1.9.1](https://github.com/coredns/coredns/releases/tag/v1.9.1) | 
| Helm-controller | [v0.10.8](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.8) |
| Local-path-provisioner | [v0.0.21](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.21) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)

-----
# Release v1.21.11+k3s1
<!-- v1.21.11+k3s1 -->
This release updates Kubernetes to v1.21.11, and fixes a number of issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v12110).

## Changes since v1.21.10+k3s1:

* Add ability to specify etcd snapshot list output format (#5132) [(#5178)](https://github.com/k3s-io/k3s/pull/5178)
* Fixed a bug that prevented users from using k3s secrets-encryption rotation after upgrading from older K3s versions. [(#5168)](https://github.com/k3s-io/k3s/pull/5168)
* Add `--json` flag for `k3s secrets-encrypt status` [(#5197)](https://github.com/k3s-io/k3s/pull/5197)
* `k3s secrets-encrypt prepare` can now be used on control-plane only nodes [(#5229)](https://github.com/k3s-io/k3s/pull/5229)
* The embedded containerd has been bumped to v1.4.13-k3s1 [(#5233)](https://github.com/k3s-io/k3s/pull/5233)
* Backport cleanups and bugfixes from master [(#5253)](https://github.com/k3s-io/k3s/pull/5253)
   * When using the unsupported `--disable-agent` flag, kube-scheduler will now be started when a node is available.
   * Server nodes with only etcd/control-plane/etcd+control-plane roles can now be added to the cluster in any order, as long as the first node has the etcd role.
   * Any alarms present on the embedded etcd datastore are now reported and cleared at startup. This should allow for graceful recovery after exceeding and subsequently raising the etcd quota size.
* Secondary etcd-only nodes will now successfully bootstrap containerd and the kubelet before a control-plane node has joined the cluster. [(#5304)](https://github.com/k3s-io/k3s/pull/5304)
* Update Kubernetes to v1.21.11-k3s1 [(#5274)](https://github.com/k3s-io/k3s/pull/5274)
* The packaged coredns version has been bumped to v1.9.1 [(#5310)](https://github.com/k3s-io/k3s/pull/5310)
* Defragment etcd datastore before clearing alarms; don't delete temp etcd db while reconciling
 * The embedded etcd database is now defragmented on startup.
 * Fixed an issue that could cause restart of managed etcd nodes to occasionally fail while reconciling bootstrap data. [(#5342)](https://github.com/k3s-io/k3s/pull/5342)

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.11](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v12111) |
| Kine | [v0.6.5](https://github.com/k3s-io/kine/releases/tag/v0.6.5) |
| SQLite | [3.36.0](https://sqlite.org/releaselog/3_36_0.html) |
| Etcd | [v3.4.18-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.18-k3s1) |
| Containerd | [v1.4.13-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.13-k3s1) |
| Runc | [v1.0.3](https://github.com/opencontainers/runc/releases/tag/v1.0.3) |
| Flannel | [v0.16.3](https://github.com/flannel-io/flannel/releases/tag/v0.16.3) | 
| Metrics-server | [v0.5.2](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.2) |
| Traefik | [v2.6.1](https://github.com/traefik/traefik/releases/tag/v2.6.1) |
| CoreDNS | [v1.9.1](https://github.com/coredns/coredns/releases/tag/v1.9.1) | 
| Helm-controller | [v0.10.8](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.8) |
| Local-path-provisioner | [v0.0.21](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.21) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)

-----
# Release v1.21.10+k3s1
<!-- v1.21.10+k3s1 -->
This release updates Kubernetes to v1.21.10, and fixes a number of issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1219).


## Known Issues: 
* There is [an issue](https://github.com/k3s-io/k3s/issues/4784) that causes etcd only node to not able to join an existing cluster.

## Changes since v1.21.9+k3s1:

* Upgraded to V1.21.10+k3s1 and updated traefik to v2.6.1 [(#5137)](https://github.com/k3s-io/k3s/pull/5137)
* Moved containerd wait into exported function [(#5024)](https://github.com/k3s-io/k3s/pull/5024)
* Added `--server flag` to `k3s secrets-encrypt` [(#5054)](https://github.com/k3s-io/k3s/pull/5054)
* K3s kubectl now no longer outputs a [WARN] log when using the `--kubeconfig` flag [(#5074)](https://github.com/k3s-io/k3s/pull/5074)
* Used kube-router as a library [(#5089)](https://github.com/k3s-io/k3s/pull/5089)
* Removed the iptables rules from ipmasq flannel [(#5063)](https://github.com/k3s-io/k3s/pull/5063)
* Fixd annoying netpol heartbeat missing log [(#5110)](https://github.com/k3s-io/k3s/pull/5110)


## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.10](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v12110) |
| Kine | [v0.6.5](https://github.com/k3s-io/kine/releases/tag/v0.6.5) |
| SQLite | [3.33.0](https://sqlite.org/releaselog/3_33_0.html) |
| Etcd | [v3.4.18-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.18-k3s1) |
| Containerd | [v1.4.12-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.12-k3s1) |
| Runc | [v1.0.3](https://github.com/opencontainers/runc/releases/tag/v1.0.3) |
| Flannel | [v0.16.3](https://github.com/flannel-io/flannel/releases/tag/v0.16.3) | 
| Metrics-server | [v0.5.2](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.2) |
| Traefik | [v2.6.1](https://github.com/traefik/traefik/releases/tag/v2.6.1) |
| CoreDNS | [v1.8.6](https://github.com/coredns/coredns/releases/tag/v1.8.6) | 
| Helm-controller | [v0.10.8](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.8) |
| Local-path-provisioner | [v0.0.21](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.21) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)

-----
# Release v1.21.9+k3s1
<!-- v1.21.9+k3s1 -->
This release updates Kubernetes to v1.21.9, and fixes a number of issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1218).


## Known Issues: 
* There is [an issue](https://github.com/k3s-io/k3s/issues/4784) that causes etcd only node to not able to join an existing cluster.

## Changes since v1.21.8+k3s2:
* Update to Kubernetes v1.21.9 [(#4994)](https://github.com/k3s-io/k3s/pull/4994)
* Enable debug logging on all k3s subcommands with debug flag [(#4932)](https://github.com/k3s-io/k3s/pull/4932)
* K3s servers no longer attempt to manage cgroup membership when the (unsupported, hidden) `--disable-agent` flag is used. [(#4926)](https://github.com/k3s-io/k3s/pull/4926)
* Update etcd to v3.4.18-k3s1 [(#4945)](https://github.com/k3s-io/k3s/pull/4945)
* Add IPv6 NAT [(#4982)](https://github.com/k3s-io/k3s/pull/4982)
* Remove ip6table rules when cleaning up k3s [(#4978)](https://github.com/k3s-io/k3s/pull/4978)
* Adds the ability to compress etcd snapshots (#4866) [(#4959)](https://github.com/k3s-io/k3s/pull/4959)
* Update packaged components [(#4966)](https://github.com/k3s-io/k3s/pull/4966)
  * Update local-path-provisioner to v0.0.21
  * Update local-path-provisioner busybox helper to 1.34.1
  * Update metrics-server to 0.5.2
  * Update coredns to 1.8.6
  * Update traefik to 2.5.6
  * Update pause to 3.6
 
<!-- https://github.com/k3s-io/k3s/compare/v1.21.8+k3s2...v1.21.9+k3s1 -->

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.9](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1219) |
| Kine | [v0.6.5](https://github.com/k3s-io/kine/releases/tag/v0.6.5) |
| SQLite | [3.33.0](https://sqlite.org/releaselog/3_33_0.html) |
| Etcd | [v3.4.18-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.18-k3s1) |
| Containerd | [v1.4.12-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.12-k3s1) |
| Runc | [v1.0.3](https://github.com/opencontainers/runc/releases/tag/v1.0.3) |
| Flannel | [v0.15.1](https://github.com/flannel-io/flannel/releases/tag/v0.15.1) | 
| Metrics-server | [v0.5.2](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.2) |
| Traefik | [v2.5.6](https://github.com/traefik/traefik/releases/tag/v2.5.6) |
| CoreDNS | [v1.8.6](https://github.com/coredns/coredns/releases/tag/v1.8.6) | 
| Helm-controller | [v0.10.8](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.8) |
| Local-path-provisioner | [v0.0.21](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.21) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)

-----
# Release v1.21.8+k3s2
<!-- v1.21.8+k3s2 -->
This release fixes several issues, including an issue with the --agent-token flag that could prevent servers from joining managed etcd clusters when this flag was used.
<!--
This release updates Kubernetes to v1.21.8, and fixes a number of issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1216).
-->

## Known Issues: 
* There is [an issue](https://github.com/k3s-io/k3s/issues/4784) that causes etcd only node to not able to join an existing cluster.

## Changes since v1.21.8+k3s1:
* Fixed an issue that prevented cluster-reset restore from working on some nodes in a multi-node etcd cluster. ([#4922](https://github.com/k3s-io/k3s/pull/4922))
<!-- [release-1.21] fix handling of agent-token fallback to token ([#4896](https://github.com/k3s-io/k3s/pull/4896)) -->
* Fixed an issue that prevented joining additional servers when `--agent-token` is set. ([#4879](https://github.com/k3s-io/k3s/pull/4879))
* Remove vendor dir ([#4842](https://github.com/k3s-io/k3s/pull/4842))
* Backport multiple ci fixes from master ([#4814](https://github.com/k3s-io/k3s/pull/4814))
* Fix panic checking name of uninitialized etcd member ([#4786](https://github.com/k3s-io/k3s/pull/4786))
* Update bootstrap logic to output all changed files on disk (#4800) ([#4808](https://github.com/k3s-io/k3s/pull/4808))
* Close agentready channel only in k3s ([#4794](https://github.com/k3s-io/k3s/pull/4794))
<!-- https://github.com/k3s-io/k3s/compare/v1.21.8+k3s1...v1.21.8+k3s2 -->

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.8](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1217) |
| Kine | [v0.6.5](https://github.com/k3s-io/kine/releases/tag/v0.6.5) |
| SQLite | [3.33.0](https://sqlite.org/releaselog/3_33_0.html) |
| Etcd | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1) |
| Containerd | [v1.4.12-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.12-k3s1) |
| Runc | [v1.0.3](https://github.com/opencontainers/runc/releases/tag/v1.0.3) |
| Flannel | [v0.15.1](https://github.com/flannel-io/flannel/releases/tag/v0.15.1) | 
| Metrics-server | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6) |
| Traefik | [v2.4.8](https://github.com/traefik/traefik/releases/tag/v2.4.8) |
| CoreDNS | [v1.8.3](https://github.com/coredns/coredns/releases/tag/v1.8.3) | 
| Helm-controller | [v0.10.8](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.8) |
| Local-path-provisioner | [v0.0.19](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.19) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)

-----
# Release v1.21.8+k3s1
<!-- v1.21.8+k3s1 -->
This release updates Kubernetes to v1.21.8, and fixes a number of issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1216).

## Known Issues: 
* [#4881](https://github.com/k3s-io/k3s/issues/4881): When using embedded etcd and the initial server is started with --agent-token, and this agent-only token does not match the server --token value, additional servers cannot join the cluster. This will be fixed in a subsequent release.
* [#4784](https://github.com/k3s-io/k3s/issues/4784): When creating a new cluster, etcd-only servers (if any) must be created before control-plane servers.

## Changes since v1.21.7+k3s1:

* Updated Kubernetes to v1.21.8 [#4760](https://github.com/k3s-io/k3s/pull/4760)
* Added secrets encryption key rotation functionaility [(#4658)](https://github.com/k3s-io/k3s/pull/4658)
* Enhancements to ETCD snapshot functionailty [(#4606)](https://github.com/k3s-io/k3s/pull/4606)
* Added certificate rotation functionality [(#4632)](https://github.com/k3s-io/k3s/pull/4632)
* Improved flannel logging  [(#4616)](https://github.com/k3s-io/k3s/pull/4616)
* Added check for HA cluster server configuration [(#4679)](https://github.com/k3s-io/k3s/pull/4679)
* Resolved server restore bootstrap [(#4704)](https://github.com/k3s-io/k3s/pull/4704)
* Included node-external-ip in serving-kubelet.crt SANs [#4620](https://github.com/k3s-io/k3s/pull/4620)
* Bumped wharfie to v0.5.1 and use shared decompression code [#4671](https://github.com/k3s-io/k3s/pull/4671)

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.8](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1217) |
| Kine | [v0.6.5](https://github.com/k3s-io/kine/releases/tag/v0.6.5) |
| SQLite | [3.33.0](https://sqlite.org/releaselog/3_33_0.html) |
| Etcd | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1) |
| Containerd | [v1.4.12-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.12-k3s1) |
| Runc | [v1.0.3](https://github.com/opencontainers/runc/releases/tag/v1.0.3) |
| Flannel | [v0.15.1](https://github.com/flannel-io/flannel/releases/tag/v0.15.1) | 
| Metrics-server | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6) |
| Traefik | [v2.4.8](https://github.com/traefik/traefik/releases/tag/v2.4.8) |
| CoreDNS | [v1.8.3](https://github.com/coredns/coredns/releases/tag/v1.8.3) | 
| Helm-controller | [v0.10.8](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.8) |
| Local-path-provisioner | [v0.0.19](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.19) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)

-----
# Release v1.21.7+k3s1
<!-- v1.21.7+k3s1 -->
This release updates Kubernetes to v1.21.7, and fixes a number of issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1216).

## Changes since v1.21.6+k3s1:

* Updated Kubernetes to v1.21.7 and containerd v1.4.12 ([#4531](https://github.com/k3s-io/k3s/pull/4531), [#4539](https://github.com/k3s-io/k3s/pull/4539))
* Rancher will no longer suggest upgrading the Traefik chart packaged with K3s. [(#4559)](https://github.com/k3s-io/k3s/pull/4559)
* Fix regression with cluster reset [(#4524)](https://github.com/k3s-io/k3s/pull/4524)
* Allow svclb pod to enable ipv6 forwarding [(#4519)](https://github.com/k3s-io/k3s/pull/4519)
* Backport new cniplugins and klipper-lb image version [(#4515)](https://github.com/k3s-io/k3s/pull/4515)
* Support for dual stack in serviceLB controller ([#4503](https://github.com/k3s-io/k3s/pull/4503), [#4513](https://github.com/k3s-io/k3s/pull/4513))
* Fixed an issue where config.yaml arguments with an equal sign would be skipped by server. [(#4508)](https://github.com/k3s-io/k3s/pull/4508)
* Unknown flags in config are now silently skipped by k3s server and etcd-snapshot [(#4493)](https://github.com/k3s-io/k3s/pull/4493)
* K3s now supports `--etcd-arg` to specify additional etcd arguments for running etcd [(#4471)](https://github.com/k3s-io/k3s/pull/4471)
* Increase agent's apiserver ready timeout [(#4457)](https://github.com/k3s-io/k3s/pull/4457)
* Rancher will no longer suggest upgrading the Traefik chart packaged with K3s. [(#4326)](https://github.com/k3s-io/k3s/pull/4326)
* Add ability to reconcile bootstrap data between datastore and disk [(#4452)](https://github.com/k3s-io/k3s/pull/4452)
* Fix log/reap reexec [(#4376)](https://github.com/k3s-io/k3s/pull/4376)
* Resolved an issue that would occasionally cause K3s to take more than a minute to schedule initial pods on the first server in a cluster. [(#4363)](https://github.com/k3s-io/k3s/pull/4363)

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.7](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1217) |
| Kine | [v0.6.2](https://github.com/k3s-io/kine/releases/tag/v0.6.2) |
| SQLite | [3.33.0](https://sqlite.org/releaselog/3_33_0.html) |
| Etcd | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1) |
| Containerd | [v1.4.12-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.12-k3s1) |
| Runc | [v1.0.2](https://github.com/opencontainers/runc/releases/tag/v1.0.2) |
| Flannel | [v0.15.1](https://github.com/flannel-io/flannel/releases/tag/v0.15.1) | 
| Metrics-server | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6) |
| Traefik | [v2.4.8](https://github.com/traefik/traefik/releases/tag/v2.4.8) |
| CoreDNS | [v1.8.3](https://github.com/coredns/coredns/releases/tag/v1.8.3) | 
| Helm-controller | [v0.10.8](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.8) |
| Local-path-provisioner | [v0.0.19](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.19) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)

-----
# Release v1.21.6+k3s1
<!-- v1.21.6+k3s1 -->
This release updates Kubernetes to v1.21.6, and fixes a number of issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1215).

## Changes since v1.21.5+k3s2:

* Updated Kubernetes to v1.21.6 [(#4350)](https://github.com/k3s-io/k3s/pull/4350) 
* New aliases for k3s etcd-snapshot s3 commands to match the flags used with k3s server [(#4171)](https://github.com/k3s-io/k3s/pull/4171) [(#4282)](https://github.com/k3s-io/k3s/pull/4282)
* Set skip SSL verification for etcd snapshots when skip ssl verify flag is passed [(#4104)](https://github.com/k3s-io/k3s/pull/4104)
* Display cluster tls error only in debug mode [(#4201)](https://github.com/k3s-io/k3s/pull/4201)
* Made sure there are no duplicates in etcd member list [(#4213)](https://github.com/k3s-io/k3s/pull/4213)
* Added timeout option to etcd snapshot command [(#4228)](https://github.com/k3s-io/k3s/pull/4228)
* Ensured that node address labels are set before initializing the node with the integrated cloud provider [(#4251)](https://github.com/k3s-io/k3s/pull/4251)
* K3s now waits until etcd is actually able to start before joining a new members to the embedded etcd clusters [(#4246)](https://github.com/k3s-io/k3s/pull/4246)
* Fixed an issue that caused k3s to not be restarted by systemd when started with the `--log` flag [(#4236)](https://github.com/k3s-io/k3s/pull/4236)
* Updated flannel to v0.15.1 [(#4267)](https://github.com/k3s-io/k3s/pull/4267)
* Updated helm-controller and klipper-helm to time out the `helm_v2 ls --all` that is done to check for deprecated helm chart versions [(#4292)](https://github.com/k3s-io/k3s/pull/4292)
* Updated peer address when running cluster-reset [(#4302)](https://github.com/k3s-io/k3s/pull/4302)
* When using the integrated cloud provider, ensure that the scheduler doesn't start before at least one node in the cluster has been initialized [(#4363)](https://github.com/k3s-io/k3s/pull/4363)

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.6](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1216) |
| Kine | [v0.6.2](https://github.com/k3s-io/kine/releases/tag/v0.6.2) |
| SQLite | [3.33.0](https://sqlite.org/releaselog/3_33_0.html) |
| Etcd | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1) |
| Containerd | [v1.4.11-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.11-k3s1) |
| Runc | [v1.0.2](https://github.com/opencontainers/runc/releases/tag/v1.0.2) |
| Flannel | [v0.15.1](https://github.com/flannel-io/flannel/releases/tag/v0.15.1) | 
| Metrics-server | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6) |
| Traefik | [v2.4.8](https://github.com/traefik/traefik/releases/tag/v2.4.8) |
| CoreDNS | [v1.8.3](https://github.com/coredns/coredns/releases/tag/v1.8.3) | 
| Helm-controller | [v0.10.8](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.8) |
| Local-path-provisioner | [v0.0.19](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.19) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)
-----
# Release v1.21.5+k3s2
<!-- v1.21.5+k3s2 -->
This release updates containerd to v1.4.11+k3s1 to address CVE-2021-41103 / GHSA-c2h3-6mxw-7mvq.
<!--
This release updates Kubernetes to v1.21.5, and fixes a number of minor issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1214).
-->

## Changes since K3s v1.21.5+k3s1:
* The embedded containerd has been updated to v1.4.11+k3s1 to address CVE-2021-41103 ([#4138](https://github.com/k3s-io/k3s/pull/4138))
* Enable the inheritance of settings for ipv6 ([#4099](https://github.com/k3s-io/k3s/pull/4099))
* Fixed a regression introduced by #4089 that broke rootless support ([#4131](https://github.com/k3s-io/k3s/pull/4131))
* The K3s docker image now works on cgroup v2 systems, and properly reaps terminated containerd shim processes. ([#4089](https://github.com/k3s-io/k3s/pull/4089))
* Removed experimental tag from k3s server cluster commands. ([#4033](https://github.com/k3s-io/k3s/pull/4033))

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.5](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1215) |
| Kine | [v0.6.2](https://github.com/k3s-io/kine/releases/tag/v0.6.2) |
| SQLite | [3.33.0](https://sqlite.org/releaselog/3_33_0.html) |
| Etcd | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1) |
| Containerd | [v1.4.11-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.11-k3s1) |
| Runc | [v1.0.2](https://github.com/opencontainers/runc/releases/tag/v1.0.2) |
| Flannel | [v0.14.0](https://github.com/flannel-io/flannel/releases/tag/v0.14.0) | 
| Metrics-server | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6) |
| Traefik | [v2.4.8](https://github.com/traefik/traefik/releases/tag/v2.4.8) |
| CoreDNS | [v1.8.3](https://github.com/coredns/coredns/releases/tag/v1.8.3) | 
| Helm-controller | [v0.10.5](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.1) |
| Local-path-provisioner | [v0.0.19](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.19) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)
-----
# Release v1.21.5+k3s1
<!-- v1.21.5+k3s1 -->
This release updates Kubernetes to v1.21.5, and fixes a number of minor issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1214).

## Changes since K3s v1.21.4+k3s1:
* Upgrade Kubernetes to v1.21.5 ([#4032](https://github.com/k3s-io/k3s/pull/4032))
* Enhance etcd member management to be more reliable ([#4010](https://github.com/k3s-io/k3s/pull/4010))
* Exposing etcd metrics on the host IP no longer disables the localhost metrics listener ([#3986](https://github.com/k3s-io/k3s/pull/3986))
* The local kube-apiserver that is available on port 6444 on server nodes now includes the node name in the certificate SAN list ([#3962](https://github.com/k3s-io/k3s/pull/3962))
* Fix condition for adding Kubernetes endpoints ([#3946](https://github.com/k3s-io/k3s/pull/3946))
* Addon checksums are now properly updated when successfully applied. ([#3921](https://github.com/k3s-io/k3s/pull/3921))
* Reset load balancer state during etcd restoration ([#3878](https://github.com/k3s-io/k3s/pull/3878))

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.5](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1215) |
| Kine | [v0.6.2](https://github.com/k3s-io/kine/releases/tag/v0.6.2) |
| SQLite | [3.33.0](https://sqlite.org/releaselog/3_33_0.html) |
| Etcd | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1) |
| Containerd | [v1.4.9-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.9-k3s1) |
| Runc | [v1.0.2](https://github.com/opencontainers/runc/releases/tag/v1.0.2) |
| Flannel | [v0.14.0](https://github.com/flannel-io/flannel/releases/tag/v0.14.0) | 
| Metrics-server | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6) |
| Traefik | [v2.4.8](https://github.com/traefik/traefik/releases/tag/v2.4.8) |
| CoreDNS | [v1.8.3](https://github.com/coredns/coredns/releases/tag/v1.8.3) | 
| Helm-controller | [v0.10.5](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.1) |
| Local-path-provisioner | [v0.0.19](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.19) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)
-----
# Release v1.21.4+k3s1
<!-- v1.21.4+k3s1 -->
This release updates Kubernetes to v1.21.4, and fixes a number of minor issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1213).

## Changes since K3s v1.21.3+k3s1:
* Upgrade Kubernetes to v1.21.4 ([#3836](https://github.com/k3s-io/k3s/pull/3836))
* The embedded containerd has been updated to v1.4.9-k3s1 ([#3859](https://github.com/k3s-io/k3s/pull/3859))
* Nodes should no longer get stuck in a deleting state ([#3775](https://github.com/k3s-io/k3s/pull/3775))
* The embedded Helm version has been updated to v3.6.3 ([#3763](https://github.com/k3s-io/k3s/pull/3763))
* Helm install jobs should no longer hang when tiller crashes ([#3848](https://github.com/k3s-io/k3s/pull/3848))
* Servers should no longer fail to join an embedded etcd cluster if their IP address is a substring of an existing node IP address ([#3840](https://github.com/k3s-io/k3s/pull/3840) [@mstarostik](https://github.com/mstarostik))
* Etcd backups stored within a subfolder (prefix) of a S3 bucket are now listed properly ([#3812](https://github.com/k3s-io/k3s/pull/3812))
* Containers not running as root can once again use volumes created by the local-path-provisioner ([#3721](https://github.com/k3s-io/k3s/pull/3721))

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.4](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1214) |
| Kine | [v0.6.2](https://github.com/k3s-io/kine/releases/tag/v0.6.2) |
| SQLite | [3.33.0](https://sqlite.org/releaselog/3_33_0.html) |
| Etcd | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1) |
| Containerd | [v1.4.9-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.9-k3s1) |
| Runc | [v1.0.0](https://github.com/opencontainers/runc/releases/tag/v1.0.0) |
| Flannel | [v0.14.0](https://github.com/flannel-io/flannel/releases/tag/v0.14.0) | 
| Metrics-server | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6) |
| Traefik | [v2.4.8](https://github.com/traefik/traefik/releases/tag/v2.4.8) |
| CoreDNS | [v1.8.3](https://github.com/coredns/coredns/releases/tag/v1.8.3) | 
| Helm-controller | [v0.10.5](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.5) |
| Local-path-provisioner | [v0.0.19](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.19) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)
-----
# Release v1.21.3+k3s1
<!-- v1.21.3+k3s1 -->
This release updates Kubernetes to [v1.21.3](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1212).

Before upgrading from earlier releases, be sure to read the Kubernetes [Urgent Upgrade Notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#urgent-upgrade-notes).

:warning: **Important Upgrade Note** :warning:  
If you are using K3s in a HA configuration with an external SQL datastore, and your server (control-plane) nodes were not started with the `--token` CLI flag, you will no longer be able to add additional K3s servers to the cluster without specifying the token. Ensure that you retain a copy of this token, as is required when restoring from backup. Previously, K3s did not enforce the use of a token when using external SQL datastores. 

You may retrieve the token value from any server already joined to the cluster:
```bash
cat /var/lib/rancher/k3s/server/token
```

## Changes since K3s v1.21.2+k3s1:
* Upgrade Kubernetes to v1.21.3 ([#3652](https://github.com/k3s-io/k3s/pull/3652))
* Upgrade runc to v1.0.0 ([#3603](https://github.com/k3s-io/k3s/pull/3603))
* Upgrade k3s-root to v0.9.1 ([#3665](https://github.com/k3s-io/k3s/pull/3665))
* Upgrade containerd to v1.4.8-k3s1 ([#3683](https://github.com/k3s-io/k3s/pull/3683))  
  Addresses [GHSA-c72p-9xmj-rx3w](https://github.com/containerd/containerd/security/advisories/GHSA-c72p-9xmj-rx3w)
* Bootstrap data is now reliably encrypted with the cluster token ([#3514](https://github.com/k3s-io/k3s/pull/3514)/[#3690](https://github.com/k3s-io/k3s/pull/3690))  
  Addresses [GHSA-cxm9-4m6p-24mc](https://github.com/k3s-io/k3s/security/advisories/GHSA-cxm9-4m6p-24mc)
* The K3s cloud controller has been moved into a dedicated executor to improve resilience under high datastore latency ([#3530](https://github.com/k3s-io/k3s/pull/3530))
* Directories created for local-path-provisioner now have more restrictive permissions ([#3548](https://github.com/k3s-io/k3s/pull/3548))
* The embedded Helm controller more reliably handles interrupted Helm operations ([#3550](https://github.com/k3s-io/k3s/pull/3550))
* The embedded kube-router network policy controller has been updated, offering enhanced performance and security ([#3595](https://github.com/k3s-io/k3s/pull/3595))
* `k3s etcd-snapshot` error messages are now more helpful ([#3592](https://github.com/k3s-io/k3s/pull/3592))
* The in-cluster list of available etcd snapshots is no longer updated when snapshots are disabled ([#3610](https://github.com/k3s-io/k3s/pull/3610))
* The deploy controller now includes the node id in the field manager name ([#3614](https://github.com/k3s-io/k3s/pull/3614))
* The deploy controller now emits events when managing AddOn resources ([#3615](https://github.com/k3s-io/k3s/pull/3615))
* `k3s etcd-snapshot prune` now correctly prunes snapshots with custom names ([#3672](https://github.com/k3s-io/k3s/pull/3672))

## Known Issues: 
* There is a [regression](https://github.com/k3s-io/k3s/issues/2669) that may cause issues with deleting nodes due to finalizers not being removed. If you observe a node is stuck for some time and is not being deleted you can describe the node to see if any finalizers remain. If there are any finalizers, you can work around this issue by running the following command to remove the finalizers:
```bash
# replace $NODENAME with the name of the node
kubectl patch node $NODENAME -p '{"metadata":{"finalizers":[]}}' --type=merge
```

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.3](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1213) |
| Kine | [v0.6.2](https://github.com/k3s-io/kine/releases/tag/v0.6.2) |
| SQLite | [3.33.0](https://sqlite.org/releaselog/3_33_0.html) |
| Etcd | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1) |
| Containerd | [v1.4.8-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.8-k3s1) |
| Runc | [v1.0.0](https://github.com/opencontainers/runc/releases/tag/v1.0.0) |
| Flannel | [v0.14.0](https://github.com/flannel-io/flannel/releases/tag/v0.14.0) | 
| Metrics-server | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6) |
| Traefik | [v2.4.8](https://github.com/traefik/traefik/releases/tag/v2.4.8) |
| CoreDNS | [v1.8.3](https://github.com/coredns/coredns/releases/tag/v1.8.3) | 
| Helm-controller | [v0.10.1](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.1) |
| Local-path-provisioner | [v0.0.19](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.19) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)
-----
# Release v1.21.2+k3s1
<!-- v1.21.2+k3s1 -->
This release updates Kubernetes to [v1.21.2](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1211).

Before upgrading from earlier releases, be sure to read the Kubernetes [Urgent Upgrade Notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#urgent-upgrade-notes).

## Changes since K3s v1.21.1+k3s1:
* Upgrade Kubernetes to v1.21.2 ([#3479](https://github.com/k3s-io/k3s/pull/3479))
* Added the ability to perform a deletion of an etcd snapshot from either local storage or an S3 compatible object store ([#3354](https://github.com/k3s-io/k3s/pull/3354))
* Add a path for wireguard's privatekey, prevents writing files to root / ([#3403](https://github.com/k3s-io/k3s/pull/3403))
* Changed RBAC cloud-controller-manager name to prevent errors with external cloud providers ([3408](https://github.com/k3s-io/k3s/pull/3408))
* Created new client-cloud-controller certificates to allow upgrades from old ccm to new ccm ([3472](https://github.com/k3s-io/k3s/pull/3472))
* Add kubernetes.default.svc to serving certificates ([3424](https://github.com/k3s-io/k3s/pull/3424))
* Updated iptables version check in k3s check-config ([3454](https://github.com/k3s-io/k3s/pull/3454))
* Send systemd notifications for both server and agent ([3460](https://github.com/k3s-io/k3s/pull/3460))
### These were missed in the last patch notes but were in v1.21.1
* Fix for sysctl errors with kernel 5.12.2 or newer ([#3341](https://github.com/k3s-io/k3s/pull/3341))

## Known Issues: 
* There is a [regression](https://github.com/k3s-io/k3s/issues/2669) that may cause issues with deleting nodes due to finalizers not being removed. If you observe a node is stuck for some time and is not being deleted you can describe the node to see if any finalizers remain. If there are any finalizers, you can work around this issue by running the following command to remove the finalizers:
```bash
# replace $NODENAME with the name of the node
kubectl patch node $NODENAME -p '{"metadata":{"finalizers":[]}}' --type=merge
```

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.2](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1212) |
| Kine | [v0.6.0](https://github.com/k3s-io/kine/releases/tag/v0.6.0) |
| SQLite | [3.33.0](https://sqlite.org/releaselog/3_33_0.html) |
| Etcd | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1) |
| Containerd | [v1.4.4-k3s2](https://github.com/k3s-io/containerd/releases/tag/v1.4.4-k3s2) |
| Runc | [v1.0.0-rc95](https://github.com/opencontainers/runc/releases/tag/v1.0.0-rc95) |
| Flannel | [v0.14.0](https://github.com/flannel-io/flannel/releases/tag/v0.14.0) | 
| Metrics-server | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6) |
| Traefik | [v2.4.8](https://github.com/traefik/traefik/releases/tag/v2.4.8) |
| CoreDNS | [v1.8.3](https://github.com/coredns/coredns/releases/tag/v1.8.3) | 
| Helm-controller | [v0.9.1](https://github.com/k3s-io/helm-controller/releases/tag/v0.9.1) |
| Local-path-provisioner | [v0.0.19](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.19) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)

-----
# Release v1.21.1+k3s1
<!-- v1.21.1+k3s1 -->
This release updates Kubernetes to [v1.21.1](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1210).

As v1.21 releases include a number of significant changes from previous versions, we will not make v1.21 available via the [stable release channel](https://rancher.com/docs/k3s/latest/en/upgrades/basic/#release-channels) until a later date.

Before upgrading from earlier releases, be sure to read the Kubernetes [Urgent Upgrade Notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#urgent-upgrade-notes).

## Changes since K3s v1.21.0+k3s1:
* Upgrade Kubernetes to v1.21.1 (k3s-io/k3s#3328)
* The install script can be forced to restart services, even if the version or systemd unit has not changed. (k3s-io/k3s#3235)
* The install script properly passes through shell metacharacters present in K3s command-line flags. (k3s-io/k3s#3355)
* The install script now ensures correct filesystem permissions for the environment file when run as a non-root user. (k3s-io/k3s#3355 @claycooper)
* The uninstall script now attempts to unmount CSI volumes before cleaning up the local filesystem. (k3s-io/k3s#3265 @angelnu)
* CLI flags loaded from configuration files are now included in the node-args annotation. (k3s-io/k3s#3290)
* When merging multiple configuration files from `config.yaml.d`, lists can be appended to instead of replaced by ending the flag name with `+`. (k3s-io/k3s#3229)
* Etcd snapshots can now be listed, pruned, and deleted via the `k3s etcd-snapshot` subcommand (k3s-io/k3s#3277 k3s-io/k3s#3303 k3s-io/k3s#3310)
* K3s now supports specifying an alternative registry to host images for packaged components, via the `--system-default-registry` CLI flag. (k3s-io/k3s#3285)  
    This setting is configured on servers, propagated to agents. Any images found in airgap tarballs will be retagged to appear to come from this registry as well as the default registry (docker.io).
* The in-cluster Kubernetes apiserver certificate is now valid for the same hostnames/addresses as the external certificate. (k3s-io/k3s#3241)
* The Kubernetes default certificate signing controllers now use the correct CAs to sign server certificates. (k3s-io/k3s#3259 @siegfriedweber)
* Conntrack-related sysctls critical to the operation of kube-proxy are now set directly by K3s, instead of by the embedded kube-proxy. (k3s-io/k3s#3341)
* Privileged containers can now be run inside Dockerized K3s clusters (`k3d`, `docker run rancher/k3s`, etc) without receiving a "apply caps: operation not permitted: unknown" error. (k3s-io/k3s#3359)


## Known Issues: 
* There is a [regression](https://github.com/k3s-io/k3s/issues/2669) that may cause issues with deleting nodes due to finalizers not being removed. If you observe a node is stuck for some time and is not being deleted you can describe the node to see if any finalizers remain. If there are any finalizers, you can work around this issue by running the following command to remove the finalizers:
```bash
# replace $NODENAME with the name of the node
kubectl patch node $NODENAME -p '{"metadata":{"finalizers":[]}}' --type=merge
```

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.1](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1211) |
| Kine | [v0.6.0](https://github.com/k3s-io/kine/releases/tag/v0.6.0) |
| SQLite | [3.33.0](https://sqlite.org/releaselog/3_33_0.html) |
| Etcd | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1) |
| Containerd | [v1.4.4-k3s2](https://github.com/k3s-io/containerd/releases/tag/v1.4.4-k3s2) |
| Runc | [v1.0.0-rc95](https://github.com/opencontainers/runc/releases/tag/v1.0.0-rc95) |
| Flannel | [v0.13.1-rc2 (273b36c)](https://github.com/flannel-io/flannel/compare/v0.13.1-rc2...273b36c) | 
| Metrics-server | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6) |
| Traefik | [v2.4.8](https://github.com/traefik/traefik/releases/tag/v2.4.8) |
| CoreDNS | [v1.8.3](https://github.com/coredns/coredns/releases/tag/v1.8.3) | 
| Helm-controller | [v0.9.1](https://github.com/k3s-io/helm-controller/releases/tag/v0.9.1) |
| Local-path-provisioner | [v0.0.19](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.19) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)
-----
# Release v1.21.0+k3s1
<!-- v1.21.0+k3s1 -->
This release is K3s's first in the v1.21 line. It updates Kubernetes to [v1.21.0](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1200).

As this release includes a number of significant changes from previous versions, we will not make v1.21 available via the [stable release channel](https://rancher.com/docs/k3s/latest/en/upgrades/basic/#release-channels) until v1.21.1+k3s1 or later.

Before upgrading from earlier releases, be sure to read the Kubernetes [Urgent Upgrade Notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#urgent-upgrade-notes).

## Changes since K3s v1.20:
* Upgrade Kubernetes to v1.21.0 (k3s-io/k3s#3097)
* Dual-stack IPv4/IPv6 operation is now possible. (k3s-io/k3s#3212)  
  Flannel, ServiceLB, and the Network Policy Controller do not support IPv6 yet, so those wanting to experiment with dual-stack operation must disable these features and install a dual-stack capable CNI Plugin, as well as providing dual-stack addresses for `--node-ip`, `--cluster-cidr`, and `--service-cidr`. See the [upstream documentation](https://kubernetes.io/docs/tasks/network/validate-dual-stack/) for more information.
* `conf.d` style config loading is now supported. (k3s-io/k3s#3162)  
  Additional configuration files found in `/etc/rancher/k3s/config.yaml.d/` will be loaded in sequential order; the last file to set a value takes precendence.
* Airgap images can now be loaded from zstandard-compressed tarballs. (k3s-io/k3s#2929)
* Release artifacts now include k3s-airgap-images tarballs compressed with zstandard and gzip. (k3s-io/k3s#3169)  
  Zstandard produces archives that are significantly smaller, and faster to decompress compared to gzip. Gzip and uncompressed archives are provided for those using `docker load` to import images into a private registry.
* Service Account Issuer Discovery is now supported, using the OpenID provider endpoint built in to the Kubernetes API Server. (k3s-io/k3s#3097)
* CoreDNS has been upgraded to v1.8.3. (k3s-io/k3s#3168)
* Traefik has been upgraded to v2.4.8. (k3s-io/k3s#2910)  
  Existing clusters will not upgrade from v1.x but all new installations will have Traefik v2.
* Agents now use static local ports for load-balancer tunnels to servers. (k3s-io/k3s#3026)
* ContainerD now supports repository rewrites in the private registry configuration (k3s-io/k3s#3064)  
  This is intended for use with private registries that prefix mirrored images, for example if `nginx:latest` is mirrored as `myregistry.example.com/images-prod/library/nginx:latest`.

## Known Issues: 
* Install script does not properly escape shell special characters in arguments ([#3179](https://github.com/k3s-io/k3s/issues/3179))
* There is a [regression](https://github.com/k3s-io/k3s/issues/2669) that may cause issues with deleting nodes due to finalizers not being removed. If you observe a node is stuck for some time and is not being deleted you can describe the node to see if any finalizers remain. If there are any finalizers, you can work around this issue by running the following command to remove the finalizers:
```bash
# replace $NODENAME with the name of the node
kubectl patch node $NODENAME -p '{"metadata":{"finalizers":[]}}' --type=merge
```

## Embedded Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.0](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1210) |
| Kine | [v0.6.0](https://github.com/k3s-io/kine/releases/tag/v0.6.0) |
| SQLite | [3.33.0](https://sqlite.org/releaselog/3_33_0.html) |
| Etcd | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1) |
| Containerd | [v1.4.4-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.4-k3s1) |
| Runc | [v1.0.0-rc93 (3397a09)](https://github.com/opencontainers/runc/compare/v1.0.0-rc93...3397a09) |
| Flannel | [v0.13.1-rc2 (273b36c)](https://github.com/flannel-io/flannel/compare/v0.13.1-rc2...273b36c) | 
| Metrics-server | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6) |
| Traefik | [v2.4.8](https://github.com/traefik/traefik/releases/tag/v2.4.8) |
| CoreDNS | [v1.8.3](https://github.com/coredns/coredns/releases/tag/v1.8.3) | 
| Helm-controller | [v0.8.3](https://github.com/k3s-io/helm-controller/releases/tag/v0.8.3) |
| Local-path-provisioner | [v0.0.19](https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.19) |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/k3s/issues/new/choose)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://rancher.com/docs/k3s/latest/en/) for guidance on how to get started or to dive deep into K3s.
- [Read how you can contribute here](https://github.com/rancher/k3s/blob/master/CONTRIBUTING.md)
-----
