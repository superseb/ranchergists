| Version | Date | US date | EU date |
| ------- | ---- | ------- | ------- |
| [v1.21.14+rke2r1](rke2-v1.21#release-v12114rke2r1) | Jul 05 2022 | 07/05/22 | 2022-07-05 |
| [v1.21.13+rke2r2](rke2-v1.21#release-v12113rke2r2) | Jun 13 2022 | 06/13/22 | 2022-06-13 |
| [v1.21.12+rke2r2](rke2-v1.21#release-v12112rke2r2) | May 05 2022 | 05/05/22 | 2022-05-05 |
| [v1.21.12+rke2r1](rke2-v1.21#release-v12112rke2r1) | Apr 28 2022 | 04/28/22 | 2022-04-28 |
| [v1.21.11+rke2r1](rke2-v1.21#release-v12111rke2r1) | Mar 31 2022 | 03/31/22 | 2022-03-31 |
| [v1.21.10+rke2r2](rke2-v1.21#release-v12110rke2r2) | Mar 15 2022 | 03/15/22 | 2022-03-15 |
| [v1.21.10+rke2r1](rke2-v1.21#release-v12110rke2r1) | Feb 23 2022 | 02/23/22 | 2022-02-23 |
| [v1.21.9+rke2r1](rke2-v1.21#release-v1219rke2r1) | Jan 26 2022 | 01/26/22 | 2022-01-26 |
| [v1.21.8+rke2r2](rke2-v1.21#release-v1218rke2r2) | Jan 11 2022 | 01/11/22 | 2022-01-11 |
| [v1.21.8+rke2r1](rke2-v1.21#release-v1218rke2r1) | Dec 23 2021 | 12/23/21 | 2021-12-23 |
| [v1.21.7+rke2r2](rke2-v1.21#release-v1217rke2r2) | Dec 06 2021 | 12/06/21 | 2021-12-06 |
| [v1.21.7+rke2r1](rke2-v1.21#release-v1217rke2r1) | Dec 02 2021 | 12/02/21 | 2021-12-02 |
| [v1.21.6+rke2r1](rke2-v1.21#release-v1216rke2r1) | Oct 30 2021 | 10/30/21 | 2021-10-30 |
| [v1.21.5+rke2r2](rke2-v1.21#release-v1215rke2r2) | Oct 07 2021 | 10/07/21 | 2021-10-07 |
| [v1.21.5+rke2r1](rke2-v1.21#release-v1215rke2r1) | Sep 23 2021 | 09/23/21 | 2021-09-23 |
| [v1.21.4+rke2r3](rke2-v1.21#release-v1214rke2r3) | Sep 02 2021 | 09/02/21 | 2021-09-02 |
| [v1.21.4+rke2r2](rke2-v1.21#release-v1214rke2r2) | Aug 30 2021 | 08/30/21 | 2021-08-30 |
| [v1.21.4+rke2r1](rke2-v1.21#release-v1214rke2r1) | Aug 26 2021 | 08/26/21 | 2021-08-26 |
| [v1.21.3+rke2r1](rke2-v1.21#release-v1213rke2r1) | Jul 22 2021 | 07/22/21 | 2021-07-22 |
| [v1.21.2+rke2r1](rke2-v1.21#release-v1212rke2r1) | Jun 24 2021 | 06/24/21 | 2021-06-24 |



# Release v1.21.14+rke2r1
<!-- v1.21.14+rke2r1 -->

This release updates Kubernetes to v1.21.14, fixes a number of minor issues, and includes security updates.

**Important Notes**

If your server (control-plane) nodes were not started with the `--token` CLI flag or config file key, a randomized token was generated during initial cluster startup. This key is used both for joining new nodes to the cluster, and for encrypting cluster bootstrap data within the datastore. Ensure that you retain a copy of this token, as is required when restoring from backup.

You may retrieve the token value from any server already joined to the cluster:
```bash
cat /var/lib/rancher/rke2/server/token
```

## Changes since v1.21.13+rke2r2:

* Add Static Pod Startup Hook + K3s Bump + CoreDNS bump [(#3068)](https://github.com/rancher/rke2/pull/3068)
* June patch 1.21 [(#3085)](https://github.com/rancher/rke2/pull/3085)
* Double number of steps for criBackoff

## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.14](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v12114) |
| Etcd            | [v3.4.18](https://github.com/k3s-io/etcd/releases/tag/v3.4.18)                       |
| Containerd      | [v1.4.13-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.13-k3s1)                      |
| Runc            | [v1.0.3](https://github.com/opencontainers/runc/releases/tag/v1.0.3)                              |
| Metrics-server  | [v0.5.0](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.0)                   |
| CoreDNS         | [v1.9.3](https://github.com/coredns/coredns/releases/tag/v1.9.3)                                  |
| Ingress-Nginx   | [4.1.0](https://github.com/kubernetes/ingress-nginx/releases/tag/helm-chart-4.1.0)                                  |
| Helm-controller | [v0.12.1](https://github.com/k3s-io/helm-controller/releases/tag/v0.12.1)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.17.0](https://github.com/k3s-io/flannel/releases/tag/v0.17.0)<br/>[Calico v3.21.4](https://projectcalico.docs.tigera.io/archive/v3.21/release-notes/#v3214) | Yes            |
| Calico          | [v3.19.2](https://projectcalico.docs.tigera.io/archive/v3.19/release-notes/#v3192)                                                                    | No             |
| Cilium          | [v1.11.5](https://github.com/cilium/cilium/releases/tag/v1.11.5)                                                                                                                      | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Known Issues

- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.14+rke2r1
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Helpful Links

As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.
-----
# Release v1.21.13+rke2r2
<!-- v1.21.13+rke2r2 -->

This release updates Kubernetes to v1.21.13, fixes a number of minor issues, and includes security updates.

**Important Note**

If your server (control-plane) nodes were not started with the `--token` CLI flag or config file key, a randomized token was generated during initial cluster startup. This key is used both for joining new nodes to the cluster, and for encrypting cluster bootstrap data within the datastore. Ensure that you retain a copy of this token, as is required when restoring from backup.

You may retrieve the token value from any server already joined to the cluster:

```bash
cat /var/lib/rancher/rke2/server/token
```

## Changes since v1.21.12+rke2r2:

* [Release 1.21] Updating the vSphere CPI chart version. [(#2871)](https://github.com/rancher/rke2/pull/2871)
* [Release 1.21] Update Cilium version [(#2877)](https://github.com/rancher/rke2/pull/2877)
* [Release 1.21] Move windows dependencies check to CI  (#2880) [(#2927)](https://github.com/rancher/rke2/pull/2927)
* [Release 1.21] Support dev rpm creation and installation [(#2938)](https://github.com/rancher/rke2/pull/2938)
* [Release 1.21] Ignore windows binaries when creating linux bundle [(#2947)](https://github.com/rancher/rke2/pull/2947)
* [Release 1.21] Update Cilium to 1.11.5 [(#2986)](https://github.com/rancher/rke2/pull/2986)
* Update rke2-kube-proxy and kubernetes to v1.21.13 [(#2988)](https://github.com/rancher/rke2/pull/2988)
* May release v1.21.13+rke2r2 [(#3032)](https://github.com/rancher/rke2/pull/3032)

## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.13](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v12113) |
| Etcd            | [v3.4.18-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.18)                       |
| Containerd      | [v1.4.13-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.13-k3s1)                      |
| Runc            | [v1.0.3](https://github.com/opencontainers/runc/releases/tag/v1.0.3)                              |
| Metrics-server  | [v0.5.0](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.0)                   |
| CoreDNS         | [v1.9.1](https://github.com/coredns/coredns/releases/tag/v1.9.1)                                  |
| Ingress-Nginx   | [4.1.0](https://github.com/kubernetes/ingress-nginx/releases/tag/helm-chart-4.1.0)                                  |
| Helm-controller | [v0.12.1](https://github.com/k3s-io/helm-controller/releases/tag/v0.12.1)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.17.0](https://github.com/k3s-io/flannel/releases/tag/v0.17.0)<br/>[Calico v3.21.4](https://projectcalico.docs.tigera.io/archive/v3.21/release-notes/#v3214) | Yes            |
| Calico          | [v3.19.2](https://projectcalico.docs.tigera.io/archive/v3.19/release-notes/#v3192)                                                                    | No             |
| Cilium          | [v1.11.5](https://github.com/cilium/cilium/releases/tag/v1.11.5)                                                                                                                      | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Known Issues

- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.13+rke2r2
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Helpful Links

As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.
-----
# Release v1.21.12+rke2r2
<!-- v1.21.12+rke2r2 -->

This release updates a number of RKE2 components to address and resolve some minor issues identified on `v1.21.12+rke2r1` release.

**Important Note**

If your server (control-plane) nodes were not started with the `--token` CLI flag or config file key, a randomized token was generated during initial cluster startup. This key is used both for joining new nodes to the cluster, and for encrypting cluster bootstrap data within the datastore. Ensure that you retain a copy of this token, as is required when restoring from backup.

You may retrieve the token value from any server already joined to the cluster:

```bash
cat /var/lib/rancher/rke2/server/token
```

## Changes since v1.21.12+rke2r1:

* Bump rke2-ingress-nginx to remove accidentally committed .orig files [(#2843)](https://github.com/rancher/rke2/pull/2843)
* Bump dynamiclistener to fix apiserver outage issue [(#2847)](https://github.com/rancher/rke2/pull/2847)
* update Kubernetes to 1.21.12 r2 [(#2832)](https://github.com/rancher/rke2/pull/2832)

## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.12](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v12112) |
| Etcd            | [v3.4.18-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.18-k3s1)                       |
| Containerd      | [v1.4.13-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.13-k3s1)                      |
| Runc            | [v1.0.3](https://github.com/opencontainers/runc/releases/tag/v1.0.3)                              |
| Metrics-server  | [v0.5.0](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.0)                   |
| CoreDNS         | [v1.9.1](https://github.com/coredns/coredns/releases/tag/v1.9.1)                                  |
| Ingress-Nginx   | [4.1.0](https://github.com/kubernetes/ingress-nginx/releases/tag/helm-chart-4.1.0)                                  |
| Helm-controller | [v0.12.1](https://github.com/k3s-io/helm-controller/releases/tag/v0.12.1)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.17.0](https://github.com/k3s-io/flannel/releases/tag/v0.17.0)<br/>[Calico v3.19.2](https://projectcalico.docs.tigera.io/archive/v3.19/release-notes/#v3192) | Yes            |
| Calico          | [v3.19.2](https://projectcalico.docs.tigera.io/archive/v3.19/release-notes/#v3192)                                                                    | No             |
| Cilium          | [v1.11.2](https://github.com/cilium/cilium/releases/tag/v1.11.2)                                                                                                                      | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Known Issues

- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.12+rke2r2
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Helpful Links

As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.

-----
# Release v1.21.12+rke2r1
<!-- v1.21.12+rke2r1 -->

This release updates Kubernetes to v1.21.12, fixes a number of minor issues, and includes security updates.

**Important Note**

If your server (control-plane) nodes were not started with the `--token` CLI flag or config file key, a randomized token was generated during initial cluster startup. This key is used both for joining new nodes to the cluster, and for encrypting cluster bootstrap data within the datastore. Ensure that you retain a copy of this token, as is required when restoring from backup.

You may retrieve the token value from any server already joined to the cluster:
```bash
cat /var/lib/rancher/rke2/server/token
```

## Changes since v1.21.11+rke2r1:

* Fix windows dev images to include proper runtime tag  [(#2735)](https://github.com/rancher/rke2/pull/2735)
* Add message in the killall script [(#2743)](https://github.com/rancher/rke2/pull/2743)
* Update cilium to support automatic dual-stack config [(#2749)](https://github.com/rancher/rke2/pull/2749)
* vSphere Chart Updates [(#2760)](https://github.com/rancher/rke2/pull/2760)
* Use secure health check ports for the RKE2 CCM [(#2762)](https://github.com/rancher/rke2/pull/2762)
* Bump harvester cloud provider 0.1.11 [(#2766)](https://github.com/rancher/rke2/pull/2766)
* Bump Harvester csi to v0.1.11 [(#2778)](https://github.com/rancher/rke2/pull/2778)
* Bump K3s version [(#2781)](https://github.com/rancher/rke2/pull/2781)
* Remove kube-proxy static pod manifest when --disable-kube-proxy is set [(#2787)](https://github.com/rancher/rke2/pull/2787)
* Update k8s to v1.21.12 [(#2794)](https://github.com/rancher/rke2/pull/2794)
* Secrets-encrypt backports [(#2800)](https://github.com/rancher/rke2/pull/2800)
* Remove failure:ignore tag for s390x pipeline [(#2792)](https://github.com/rancher/rke2/pull/2792)
* Revert "[Release-1.21] Remove failure:ignore tag for s390x pipeline" [(#2803)](https://github.com/rancher/rke2/pull/2803)
* Also inject system-default-registry as global.cattle.systemDefaultRegistry [(#2807)](https://github.com/rancher/rke2/pull/2807)
* Bump k3s for April Fixes [(#2812)](https://github.com/rancher/rke2/pull/2812)
* Upgrade ingress nginx chart and images [(#2826)](https://github.com/rancher/rke2/pull/2826)

## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.12](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v12112) |
| Etcd            | [v3.4.18-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.18)                          |
| Containerd      | [v1.4.13-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.13-k3s1)                      |
| Runc            | [v1.0.3](https://github.com/opencontainers/runc/releases/tag/v1.0.3)                              |
| Metrics-server  | [v0.5.0](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.0)                   |
| CoreDNS         | [v1.9.1](https://github.com/coredns/coredns/releases/tag/v1.9.1)                                  |
| Ingress-Nginx   | [4.1.0](https://github.com/kubernetes/ingress-nginx/releases/tag/helm-chart-4.1.0)                                  |
| Helm-controller | [v0.12.1](https://github.com/k3s-io/helm-controller/releases/tag/v0.12.1)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.17.0](https://github.com/k3s-io/flannel/releases/tag/v0.17.0)<br/>[Calico v3.21.4](https://projectcalico.docs.tigera.io/archive/v3.19/release-notes/#v3192) | Yes            |
| Calico          | [v3.19.2](https://projectcalico.docs.tigera.io/archive/v3.19/release-notes/#v3192)                                                                    | No             |
| Cilium          | [v1.11.2](https://github.com/cilium/cilium/releases/tag/v1.11.2)                                                                                                                      | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Known Issues

- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.12+rke2r1
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Helpful Links

As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.

-----
# Release v1.21.11+rke2r1
<!-- v1.21.11+rke2r1 -->

This release updates Kubernetes to v1.21.11, fixes a number of minor issues, and includes security updates.

### Important Note
#### This release includes a breaking change to how Cilium helm chart values are customized.
Previously, the cilium CNI was bundled as a subchart of the rke2-cilium chart, and all chart values were nested under the top-level `cilium` key within the `valuesContent` section. As of this release, the subchart has been removed and nesting is no longer necessary. Chart values should be placed directly within the `valuesContent` section.
For example, if you previously had:
```yaml
apiVersion: helm.cattle.io/v1
kind: HelmChartConfig
metadata:
  name: rke2-cilium
  namespace: kube-system
spec:
  valuesContent: |-
    cilium:
      ipv6:
        enabled: true
```
That should be converted to:
```yaml
apiVersion: helm.cattle.io/v1
kind: HelmChartConfig
metadata:
  name: rke2-cilium
  namespace: kube-system
spec:
  valuesContent: |-
    ipv6:
      enabled: true
```

#### Cluster Join Token
If your server (control-plane) nodes were not started with the `--token` CLI flag or config file key, a randomized token was generated during initial cluster startup. This key is used both for joining new nodes to the cluster, and for encrypting cluster bootstrap data within the datastore. Ensure that you retain a copy of this token, as is required when restoring from backup.

You may retrieve the token value from any server already joined to the cluster:
```bash
cat /var/lib/rancher/rke2/server/token
```

## Changes since v1.21.10+rke2r2:

* Update Cilium to 1.11.2 [(#2611)](https://github.com/rancher/rke2/pull/2611)
* Bump containerd to v1.4.13-k3s1 [(#2569)](https://github.com/rancher/rke2/pull/2569)
* Remove tag condition for s390x build step [(#2555)](https://github.com/rancher/rke2/pull/2555)
* Fix canal bug [(#2636)](https://github.com/rancher/rke2/pull/2636)
* Explicitly retag runtime for linux and windows [(#2630)](https://github.com/rancher/rke2/pull/2630)
* Add force-restart file when cluster-reset-restore-path is passed [(#2658)](https://github.com/rancher/rke2/pull/2658)
* Bump coredns to 1.9.1 [(#2656)](https://github.com/rancher/rke2/pull/2656)
* Update K3s and helm-controller [(#2661)](https://github.com/rancher/rke2/pull/2661)
* March release v1.21.11 [(#2643)](https://github.com/rancher/rke2/pull/2643)
* Revert "[Release-1.21] Explicitly retag runtime for linux and windows" [(#2667)](https://github.com/rancher/rke2/pull/2667)
* hardcode linker flag for windows runtime image [(#2670)](https://github.com/rancher/rke2/pull/2670)
* Update nginx from hardened2 to hardened4 [(#2676)](https://github.com/rancher/rke2/pull/2676)
* Fix uninstall script in SLES systems [(#2694)](https://github.com/rancher/rke2/pull/2694)
* Bump K3s version for v1.21 [(#2689)](https://github.com/rancher/rke2/pull/2689)
* k3s pin for containerd npipe fix + calico panic fix [(#2702)](https://github.com/rancher/rke2/pull/2702)
* Cilium update brings an important change in how the helm chart is consumed when a user wants to set some customized values via helmChartConfig. Please see [this link for more details](https://github.com/rancherlabs/release-notes/pull/232#issuecomment-1087171935)

## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.11](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v12111) |
| Etcd            | [v3.4.18.k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.18)                          |
| Containerd      | [v1.4.13-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.13-k3s1)                      |
| Runc            | [v1.0.3](https://github.com/opencontainers/runc/releases/tag/v1.0.3)                              |
| Metrics-server  | [v0.5.0](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.0)                   |
| CoreDNS         | [v1.9.1](https://github.com/coredns/coredns/releases/tag/v1.9.1)                                  |
| Ingress-Nginx   | [4.0.3](https://github.com/kubernetes/ingress-nginx/releases/tag/helm-chart-4.0.3)                                  |
| Helm-controller | [v0.12.0](https://github.com/k3s-io/helm-controller/releases/tag/v0.12.0)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.17.0](https://github.com/k3s-io/flannel/releases/tag/v0.17.0)<br/>[Calico v3.19.2](https://projectcalico.docs.tigera.io/archive/v3.22/release-notes/#v3192) | Yes            |
| Calico          | [v3.19.2](https://projectcalico.docs.tigera.io/archive/v3.19/release-notes/#v3192)                                                                                                                      | No             |
| Cilium          | [v1.11.2](https://github.com/cilium/cilium/releases/tag/v1.11.2)                                                                                                                      | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Known Issues

- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.11+rke2r1
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Helpful Links

As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.

-----
# Release v1.21.10+rke2r2

-----
# Release v1.21.10+rke2r1
<!-- v1.21.10+rke2r1 -->

This release updates Kubernetes to v1.21.10, fixes a number of minor issues, and includes security updates.

**Important Note**

If your server (control-plane) nodes were not started with the `--token` CLI flag or config file key, a randomized token was generated during initial cluster startup. This key is used both for joining new nodes to the cluster, and for encrypting cluster bootstrap data within the datastore. Ensure that you retain a copy of this token, as is required when restoring from backup.

You may retrieve the token value from any server already joined to the cluster:
```bash
cat /var/lib/rancher/rke2/server/token
```

## Changes since v1.21.9+rke2r1:

* [release 1.21] Fix a typo in the meta-data endpoint [(#2423)](https://github.com/rancher/rke2/pull/2423)
* [release-1.21] Wait for CRI service to become available before starting temp kubelet [(#2396)](https://github.com/rancher/rke2/pull/2396)
* [Release 1.21] Update canal to newer chart with bugfix [(#2430)](https://github.com/rancher/rke2/pull/2430)
* [Release-1.21] Made audit-policy-file flag independent of CIS profile flag [(#2448)](https://github.com/rancher/rke2/pull/2448)
* [Release 1.21] Update canal to v3.21.4 [(#2453)](https://github.com/rancher/rke2/pull/2453)
* add seccomp annotations to unrestricted PSP (#2440) [(#2449)](https://github.com/rancher/rke2/pull/2449)
* [release-1.21] Helm Chart improvements [(#2459)](https://github.com/rancher/rke2/pull/2459)
* Fixed a regression that prevented `--disable` from removing previously installed components. [(#2473)](https://github.com/rancher/rke2/pull/2473)
* Update Kubernetes release v1.21.10 [(#2495)](https://github.com/rancher/rke2/pull/2495)
* update kube-proxy for February release [(#2496)](https://github.com/rancher/rke2/pull/2496)

## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.10](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v12110) |
| Etcd            | [v3.4.18-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.18-k3s1)                          |
| Containerd      | [v1.4.12-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.12-k3s1)                      |
| Runc            | [v1.0.3](https://github.com/opencontainers/runc/releases/tag/v1.0.3)                              |
| CNI Plugins     | [v0.9.1](https://github.com/containernetworking/plugins/releases/tag/v0.9.1)                      |
| Metrics-server  | [v0.5.0](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.0)                   |
| CoreDNS         | [v1.8.5](https://github.com/coredns/coredns/releases/tag/v1.8.5)                                  |
| Ingress-Nginx   | [4.0.3](https://github.com/kubernetes/ingress-nginx/releases)                                  |
| Helm-controller | [v0.11.9](https://github.com/k3s-io/helm-controller/releases/tag/v0.11.9)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.16.0-rancher1](https://github.com/k3s-io/flannel/releases/tag/v0.16.0-rancher1)<br/>[Calico v3.21.2](https://docs.projectcalico.org/archive/v3.13/release-notes/#v3212) | Yes            |
| Calico          | [v3.19.2](https://projectcalico.docs.tigera.io/archive/v3.19/release-notes/#v3192)                                                                                                                     | No             |
| Cilium          | [v1.10.4](https://github.com/cilium/cilium/releases/tag/v1.10.4)                                                                                                                      | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Known Issues

- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.10+rke2r1
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

Currently an [issue](https://github.com/rancher/windows/issues/161) is preventing the airgap install on Windows from starting properly. A workaround is to pass `--runtime-image=rancher/rke2-runtime:<VERSION>-windows-amd64` as an additonal flag or add `runtime-image: rancher/rke2-runtime:<VERSION>-windows-amd64` to the config.yaml.

## Helpful Links

As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.
-----
# Release v1.21.9+rke2r1
<!-- v1.21.9+rke2r1 -->

This release updates Kubernetes to v1.21.9, fixes a number of minor issues, and includes security updates.

**Important Note**

If your server (control-plane) nodes were not started with the `--token` CLI flag or config file key, a randomized token was generated during initial cluster startup. This key is used both for joining new nodes to the cluster, and for encrypting cluster bootstrap data within the datastore. Ensure that you retain a copy of this token, as is required when restoring from backup.

You may retrieve the token value from any server already joined to the cluster:
```bash
cat /var/lib/rancher/rke2/server/token
```

## Changes since v1.21.8+rke2r2:

* [release-1.21] Update canal chart [(#2359)](https://github.com/rancher/rke2/pull/2359)
* [release-1.21] Update etcd and k3s [(#2368)](https://github.com/rancher/rke2/pull/2368)
* [release-1.21] Update RKE2 k8s version for January release [(#2373)](https://github.com/rancher/rke2/pull/2373)

## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.9](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1219) |
| Etcd            | [v3.4.18-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.18-k3s1)                          |
| Containerd      | [v1.4.12-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.12-k3s1)                    |
| Runc            | [v1.0.3](https://github.com/opencontainers/runc/releases/tag/v1.0.3)                              |
| CNI Plugins     | [v0.9.1](https://github.com/containernetworking/plugins/releases/tag/v0.9.1)                      |
| Metrics-server  | [v0.5.0](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.0)                   |
| CoreDNS         | [v1.8.5](https://github.com/coredns/coredns/releases/tag/v1.8.5)                                  |
| Ingress-Nginx   | [4.0.3](https://github.com/kubernetes/ingress-nginx/releases)                                     |
| Helm-controller | [v0.11.9](https://github.com/k3s-io/helm-controller/releases/tag/v0.11.9)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.13.0-rancher1](https://github.com/k3s-io/flannel/releases/tag/v0.13.0-rancher1)<br/>[Calico v3.19.2](https://docs.projectcalico.org/archive/v3.13/release-notes/#v3192) | Yes            |
| Calico          | [v3.19.2](https://docs.projectcalico.org/release-notes/#v3192)                                                                                                                      | No             |
| Cilium          | [v1.10.4](https://github.com/cilium/cilium/releases/tag/v1.10.4)                                                                                                                      | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Known Issues

- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.9+rke2r1
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Helpful Links

As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.

-----
# Release v1.21.8+rke2r2
<!-- v1.21.8+rke2r2 -->
This release fixes several issues, including an issue with the --agent-token flag that could prevent servers from joining managed etcd clusters when this flag was used.
<!--
This release updates Kubernetes to v1.21.8, and fixes a number of minor issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1217).
-->

## Known Issues
- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.6+rke2r1
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Changes since v1.21.8+rke2r1:
* Bump versions for v1.21.8-rc1+rke2r2 ([#2333](https://github.com/rancher/rke2/pull/2333))
<!-- https://github.com/rancher/rke2/compare/v1.21.8+rke2r1...v1.21.8+rke2r2 -->

## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.8](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1218) |
| Etcd            | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1)                          |
| Containerd      | [v1.4.12-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.11-k3s1)                    |
| Runc            | [v1.0.3](https://github.com/opencontainers/runc/releases/tag/v1.0.3)                              |
| CNI Plugins     | [v0.9.1](https://github.com/containernetworking/plugins/releases/tag/v0.9.1)                      |
| Metrics-server  | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6)                   |
| CoreDNS         | [v1.8.5](https://github.com/coredns/coredns/releases/tag/v1.8.5)                                  |
| Ingress-Nginx   | [4.0.3](https://github.com/kubernetes/ingress-nginx/releases/tag/helm-chart-4.0.3)                |
| Helm-controller | [v0.11.9](https://github.com/k3s-io/helm-controller/releases/tag/v0.11.9)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.15.1](https://github.com/flannel-io/flannel/releases/tag/v0.15.1)<br/>[Calico v3.20.1](https://docs.projectcalico.org/archive/v3.20/release-notes/#v3201)               | Yes            |
| Calico          | [v3.19.2](https://docs.projectcalico.org/release-notes/#v3192)                                                                                                                      | No             |
| Cilium          | [v1.10.4](https://github.com/cilium/cilium/releases/tag/v1.10.4)                                                                                                                    | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.

-----
# Release v1.21.8+rke2r1
<!-- v1.21.8+rke2r1 -->
This release updates Kubernetes to v1.21.8, and fixes a number of minor issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1217).

## Known Issues
* [#2323](https://github.com/rancher/rke2/issues/2323): When using embedded etcd and the initial server is started with --agent-token, and this agent-only token does not match the server --token value, additional servers cannot join the cluster. This will be fixed in a subsequent release.
* [#1447](https://github.com/rancher/rke2/issues/1447): When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.6+rke2r1
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Changes since v1.21.7+rke2r2:
* Update wharfie for tar path separator fix ([#2303](https://github.com/rancher/rke2/pull/2303))
* Bump versions for v1.21.8-rc3+rke2r1 ([#2298](https://github.com/rancher/rke2/pull/2298))
* Add check for etcd group (#2290) ([#2296](https://github.com/rancher/rke2/pull/2296))
* Bump RKE2 to v1.21.8-rc2+rke2r1 ([#2285](https://github.com/rancher/rke2/pull/2285))
* Bump K3s to v1.21.8-k3s1 ([#2282](https://github.com/rancher/rke2/pull/2282))
* Update K3s to fix cold restart issue ([#2278](https://github.com/rancher/rke2/pull/2278))
* Bump RKE2 to v1.21.8-rc1+rke2r1 ([#2275](https://github.com/rancher/rke2/pull/2275))
* Bump harvester cloud provider and harvester csi driver ([#2273](https://github.com/rancher/rke2/pull/2273))
* Update K3s ([#2264](https://github.com/rancher/rke2/pull/2264))
* Remove extra space in s390x manifest runtime template ([#2259](https://github.com/rancher/rke2/pull/2259))
* Bump RKE2 to v1.21.7-rc1+rke2r3 ([#2256](https://github.com/rancher/rke2/pull/2256))
* Add startup hook to watch/delete static pods on node delete ([#2250](https://github.com/rancher/rke2/pull/2250))
* Bump k3s and related modules  ([#2240](https://github.com/rancher/rke2/pull/2240))
* Add s390x support ([#2171](https://github.com/rancher/rke2/pull/2171))
* Bump multus image tags to match build2021111906 chart version ([#2238](https://github.com/rancher/rke2/pull/2238))
* Secrets Encryption CLI: key rotation and enable/disable ([#2235](https://github.com/rancher/rke2/pull/2235))
* Adding certificate rotation command to rke2 ([#2224](https://github.com/rancher/rke2/pull/2224))
<!-- https://github.com/rancher/rke2/compare/v1.21.7+rke2r2...v1.21.8+rke2r1 -->

## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.8](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1218) |
| Etcd            | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1)                          |
| Containerd      | [v1.4.12-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.11-k3s1)                    |
| Runc            | [v1.0.3](https://github.com/opencontainers/runc/releases/tag/v1.0.3)                              |
| CNI Plugins     | [v0.9.1](https://github.com/containernetworking/plugins/releases/tag/v0.9.1)                      |
| Metrics-server | [v0.5.0](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.0) |
| CoreDNS         | [v1.8.5](https://github.com/coredns/coredns/releases/tag/v1.8.5)                                  |
| Ingress-Nginx   | [4.0.3](https://github.com/kubernetes/ingress-nginx/releases/tag/helm-chart-4.0.3)                |
| Helm-controller | [v0.11.9](https://github.com/k3s-io/helm-controller/releases/tag/v0.11.9)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.15.1](https://github.com/flannel-io/flannel/releases/tag/v0.15.1)<br/>[Calico v3.20.1](https://docs.projectcalico.org/archive/v3.20/release-notes/#v3201)               | Yes            |
| Calico          | [v3.19.2](https://docs.projectcalico.org/release-notes/#v3192)                                                                                                                      | No             |
| Cilium          | [v1.10.4](https://github.com/cilium/cilium/releases/tag/v1.10.4)                                                                                                                    | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.
-----
# Release v1.21.7+rke2r2
<!-- v1.21.7+rke2r2 -->
This release provides some minor fixes around tooling and updates additional Windows support.

## Changes since v1.21.7+rke2r1:

* Remove socat from Dockerfile [(#2211)](https://github.com/rancher/rke2/pull/2211)
* Bump images for v1.21.7+rke2r2 [(#2219)](https://github.com/rancher/rke2/pull/2219)


## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.7](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1217) |
| Etcd            | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1)                          |
| Containerd      | [v1.4.12-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.11-k3s1)                    |
| Runc            | [v1.0.2](https://github.com/opencontainers/runc/releases/tag/v1.0.2)                              |
| CNI Plugins     | [v0.9.1](https://github.com/containernetworking/plugins/releases/tag/v0.9.1)                      |
| Metrics-server | [v0.5.0](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.0) |
| CoreDNS         | [v1.8.5](https://github.com/coredns/coredns/releases/tag/v1.8.5)                                  |
| Ingress-Nginx   | [4.0.3](https://github.com/kubernetes/ingress-nginx/releases/tag/helm-chart-4.0.3)                |
| Helm-controller | [v0.11.7](https://github.com/k3s-io/helm-controller/releases/tag/v0.11.7)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.15.1](https://github.com/flannel-io/flannel/releases/tag/v0.15.1)<br/>[Calico v3.20.1](https://docs.projectcalico.org/archive/v3.20/release-notes/#v3201)               | Yes            |
| Calico          | [v3.19.2](https://docs.projectcalico.org/release-notes/#v3192)                                                                                                                      | No             |
| Cilium          | [v1.10.4](https://github.com/cilium/cilium/releases/tag/v1.10.4)                                                                                                                    | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Known Issues
- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.6+rke2r1
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.

-----
# Release v1.21.7+rke2r1
<!-- v1.21.7+rke2r1 -->
This release updates Kubernetes to v1.21.7, fixes a number of minor issues, and addresses some security concerns.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1214).

## Changes since v1.21.6+rke2r1:

* Windows Server 2022 support [(#2097)](https://github.com/rancher/rke2/pull/2097)
* Dump logs with docker cp [(#2109)](https://github.com/rancher/rke2/pull/2109)
* Updating to new signals package in wrangler [(#2102)](https://github.com/rancher/rke2/pull/2102)
* Bump to r2 rc1 [(#2126)](https://github.com/rancher/rke2/pull/2126)
* Fix typo in windows pause image [(#2127)](https://github.com/rancher/rke2/pull/2127)
* Add etcd extra-args support to RKE2 [(#2139)](https://github.com/rancher/rke2/pull/2139)
* Bump k3s [(#2131)](https://github.com/rancher/rke2/pull/2131)
* Bump Go and k3s versions [(#2148)](https://github.com/rancher/rke2/pull/2148)
* Get node name from metadata if AWS cloud provider is enabled [(#2166)](https://github.com/rancher/rke2/pull/2166)
* Backport chart bumps from master [(#2169)](https://github.com/rancher/rke2/pull/2169)
* Version bumps for 1.21.7 prep [(#2123)](https://github.com/rancher/rke2/pull/2123)
* Update k8s v1.21.7 [(#2181)](https://github.com/rancher/rke2/pull/2181)
* Enable Rke2 parser to skip flags [(#2199)](https://github.com/rancher/rke2/pull/2199)

## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.7](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1217) |
| Etcd            | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1)                          |
| Containerd      | [v1.4.12-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.11-k3s1)                    |
| Runc            | [v1.0.2](https://github.com/opencontainers/runc/releases/tag/v1.0.2)                              |
| CNI Plugins     | [v0.9.1](https://github.com/containernetworking/plugins/releases/tag/v0.9.1)                      |
| Metrics-server | [v0.5.0](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.5.0) |
| CoreDNS         | [v1.8.5](https://github.com/coredns/coredns/releases/tag/v1.8.5)                                  |
| Ingress-Nginx   | [4.0.3](https://github.com/kubernetes/ingress-nginx/releases/tag/helm-chart-4.0.3)                |
| Helm-controller | [v0.11.7](https://github.com/k3s-io/helm-controller/releases/tag/v0.11.7)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.15.1](https://github.com/flannel-io/flannel/releases/tag/v0.15.1)<br/>[Calico v3.20.1](https://docs.projectcalico.org/archive/v3.20/release-notes/#v3201)               | Yes            |
| Calico          | [v3.19.2](https://docs.projectcalico.org/release-notes/#v3192)                                                                                                                      | No             |
| Cilium          | [v1.10.4](https://github.com/cilium/cilium/releases/tag/v1.10.4)                                                                                                                    | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Known Issues
- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.6+rke2r1
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.
-----
# Release v1.21.6+rke2r1
<!-- v1.21.6+rke2r1 -->
This release updates Kubernetes to v1.21.6, fixes a number of minor issues, and includes an update to ingress-nginx that resolves CVE-2021-25742.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1214).

## Changes since [v1.21.5+rke2r2](https://github.com/rancher/rke2/releases/tag/v1.21.5%2Brke2r2)
* Update Kubernetes to v1.21.6 ([#2060](https://github.com/rancher/rke2/pull/2059))
* The ingress-nginx helm chart has been upgraded to version 4.0.3. ([#1941](https://github.com/rancher/rke2/pull/1941))  
  This resolves CVE-2021-25742.
* Servers will no longer occasionally create duplicate static pods during upgrades. ([#1967](https://github.com/rancher/rke2/pull/1967))
* Servers will no longer join etcd clusters until the new member is more prepared to do so. ([#1990](https://github.com/rancher/rke2/pull/1990))
* Flannel's vxlan backend now generates its own MAC addresses, preventing systemd 242+ from changing them unexpectedly. ([#2006](https://github.com/rancher/rke2/pull/2006))
* The rke2-coredns chart has been updated to ensure that multiple etcd pods are not scheduled on the same node. ([#2033](https://github.com/rancher/rke2/pull/2033))
* Cluster member addresses are now updated when resetting/restoring etcd via `--cluster-reset`. ([#2030](https://github.com/rancher/rke2/pull/2030))
* The `rke2 etcd-snapshot` subcommand now honors config file settings. ([#2030](https://github.com/rancher/rke2/pull/2030))

## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.6](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1216) |
| Etcd            | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1)                          |
| Containerd      | [v1.4.11-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.11-k3s1)                    |
| Runc            | [v1.0.2](https://github.com/opencontainers/runc/releases/tag/v1.0.2)                              |
| CNI Plugins     | [v0.8.7](https://github.com/containernetworking/plugins/releases/tag/v0.8.7)                      |
| Metrics-server  | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6)                   |
| CoreDNS         | [v1.8.5](https://github.com/coredns/coredns/releases/tag/v1.8.5)                                  |
| Ingress-Nginx   | [4.0.3](https://github.com/kubernetes/ingress-nginx/releases/tag/helm-chart-4.0.3)                |
| Helm-controller | [v0.10.8](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.8)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.15.1](https://github.com/flannel-io/flannel/releases/tag/v0.15.1)<br/>[Calico v3.20.1](https://docs.projectcalico.org/archive/v3.20/release-notes/#v3201)               | Yes            |
| Calico          | [v3.19.2](https://docs.projectcalico.org/release-notes/#v3192)                                                                                                                      | No             |
| Cilium          | [v1.10.4](https://github.com/cilium/cilium/releases/tag/v1.10.4)                                                                                                                    | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Known Issues
- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.6+rke2r1
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.
-----
# Release v1.21.5+rke2r2
<!-- v1.21.5+rke2r2 -->
This release updates containerd to v1.4.11+k3s1 to address CVE-2021-41103 / GHSA-c2h3-6mxw-7mvq.
<!--
This release updates Kubernetes to v1.21.5, and fixes a number of minor issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1214).
-->

**Important Note**

If your server (control-plane) nodes were not started with the `--token` CLI flag or config file key, a randomized token was generated during initial cluster startup. This key is used both for joining new nodes to the cluster, and for encrypting cluster bootstrap data within the datastore. Ensure that you retain a copy of this token, as is required when restoring from backup.

You may retrieve the token value from any server already joined to the cluster:
```bash
cat /var/lib/rancher/rke2/server/token
```

## Changes since [v1.21.5+rke2r1](https://github.com/rancher/rke2/releases/tag/v1.21.5%2Brke2r1)

* Bump containerd to v1.4.11 for CVE fix [(#1913)](https://github.com/rancher/rke2/pull/1913)
* Disabled embedded Cloud Controller Manager when enabling packaged cloud-provider charts [(#1864)](https://github.com/rancher/rke2/pull/1864)
* Added Permit Port Sharing Flag to Scheduler and Controller Manager (#1841) [(#1851)](https://github.com/rancher/rke2/pull/1851)
* Incremented Calico chart version [(#1886)](https://github.com/rancher/rke2/pull/1886)
* Added missing Cilium packaging [(#1896)](https://github.com/rancher/rke2/pull/1896)

## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.5](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1215) |
| Etcd            | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1)                          |
| Containerd      | [v1.4.11-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.11-k3s1)                    |
| Runc            | [v1.0.2](https://github.com/opencontainers/runc/releases/tag/v1.0.2)                              |
| CNI Plugins     | [v0.8.7](https://github.com/containernetworking/plugins/releases/tag/v0.8.7)                      |
| Metrics-server  | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6)                   |
| CoreDNS         | [v1.8.3](https://github.com/coredns/coredns/releases/tag/v1.8.3)                                  |
| Ingress-Nginx   | [3.34.001](https://github.com/kubernetes/ingress-nginx/releases)                                  |
| Helm-controller | [v0.10.6](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.6)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.13.0-rancher1](https://github.com/k3s-io/flannel/releases/tag/v0.13.0-rancher1)<br/>[Calico v3.19.2](https://docs.projectcalico.org/archive/v3.19/release-notes/#v3192) | Yes            |
| Calico          | [v3.19.2](https://docs.projectcalico.org/release-notes/#v3192)                                                                                                                      | No             |
| Cilium          | [v1.10.4](https://github.com/cilium/cilium/releases/tag/v1.10.4)                                                                                                                      | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Known Issues
- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.5+rke2r1
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.

-----
# Release v1.21.5+rke2r1
<!-- v1.21.5+rke2r1 -->
This release updates Kubernetes to v1.21.5, and fixes a number of minor issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1214).

**Important Note**

If your server (control-plane) nodes were not started with the `--token` CLI flag or config file key, a randomized token was generated during initial cluster startup. This key is used both for joining new nodes to the cluster, and for encrypting cluster bootstrap data within the datastore. Ensure that you retain a copy of this token, as is required when restoring from backup.

You may retrieve the token value from any server already joined to the cluster:
```bash
cat /var/lib/rancher/rke2/server/token
```

## Changes since [v1.21.4+rke2r3](https://github.com/rancher/rke2/releases/tag/v1.21.4%2Brke2r3)

* Upgrade Kubernetes to v1.21.5 [(#1861)](https://github.com/rancher/rke2/issues/1861)
* Resolved an issue where air-gapped image rewrites failed if path began with "docker.io" [(#1460)](https://github.com/rancher/rke2/issues/1460)
* Added Harvester Cloud Controller Manager (CMM) and Container Storage Interface (CSI) support [(#1680)](https://github.com/rancher/rke2/issues/1680)
* Switched upstream k3s branch from master to engine-1.21 [(#1710)](https://github.com/rancher/rke2/issues/1710)
* Resolved an issue where apiserver cert is missing hostname SAN entries [(#1740)](https://github.com/rancher/rke2/issues/1740)
* Resolve an issue where imported airgap images were not associated with a rke2 lease [(#1779)](https://github.com/rancher/rke2/issues/1779)
* Resolved an issue where the "etcd-expose-metrics" setting caused the etcd livenessProbe to fail [(#1795)](https://github.com/rancher/rke2/issues/1795)
* Experimental support for dual-stack calico [(#1836)](https://github.com/rancher/rke2/issues/1836)

## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.5](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1215) |
| Etcd            | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1)                          |
| Containerd      | [v1.4.9-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.9-k3s1)                      |
| Runc            | [v1.0.2](https://github.com/opencontainers/runc/releases/tag/v1.0.2)                              |
| CNI Plugins     | [v0.8.7](https://github.com/containernetworking/plugins/releases/tag/v0.8.7)                      |
| Metrics-server  | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6)                   |
| CoreDNS         | [v1.8.3](https://github.com/coredns/coredns/releases/tag/v1.8.3)                                  |
| Ingress-Nginx   | [3.34.001](https://github.com/kubernetes/ingress-nginx/releases)                                  |
| Helm-controller | [v0.10.6](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.6)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.13.0-rancher1](https://github.com/k3s-io/flannel/releases/tag/v0.13.0-rancher1)<br/>[Calico v3.19.2](https://docs.projectcalico.org/archive/v3.19/release-notes/#v3192) | Yes            |
| Calico          | [v3.19.2](https://docs.projectcalico.org/release-notes/#v3192)                                                                                                                      | No             |
| Cilium          | [v1.10.4](https://github.com/cilium/cilium/releases/tag/v1.10.4)                                                                                                                      | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Known Issues
- [#1894](https://github.com/rancher/rke2/issues/1894) - Airgap installs with Cilium fail due to missing package bumps in v1.21.5+rke2r1
- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.5+rke2r1
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.

-----
# Release v1.21.4+rke2r3
<!-- v1.21.4+rke2r3 -->
This release resolves issue #1744 by packaging the correct version of Kubernetes for Windows agents.

**Important Note**

If your server (control-plane) nodes were not started with the `--token` CLI flag or config file key, a randomized token was generated during initial cluster startup. This key is used both for joining new nodes to the cluster, and for encrypting cluster bootstrap data within the datastore. Ensure that you retain a copy of this token, as is required when restoring from backup.

You may retrieve the token value from any server already joined to the cluster:
```bash
cat /var/lib/rancher/rke2/server/token
```

## Changes since v1.21.4+rke2r2

* switch to using the build arg KUBERNETES_VERSION over the hardcoded ENV in the windows dockerfile [(#1744)](https://github.com/rancher/rke2/issues/1744)


## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.4](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1214) |
| Etcd            | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1)                          |
| Containerd      | [v1.4.9-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.9-k3s1)                      |
| Runc            | [v1.0.0](https://github.com/opencontainers/runc/releases/tag/v1.0.0)                              |
| CNI Plugins     | [v0.8.7](https://github.com/containernetworking/plugins/releases/tag/v0.8.7)                      |
| Metrics-server  | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6)                   |
| CoreDNS         | [v1.8;3](https://github.com/coredns/coredns/releases/tag/v1.8.3)                                  |
| Ingress-Nginx   | [3.34.001](https://github.com/kubernetes/ingress-nginx/releases)                                  |
| Helm-controller | [v0.10.6](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.6)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.13.0-rancher1](https://github.com/k3s-io/flannel/releases/tag/v0.13.0-rancher1)<br/>[Calico v3.13.3](https://docs.projectcalico.org/archive/v3.13/release-notes/#v3133) | Yes            |
| Calico          | [v3.19.2](https://docs.projectcalico.org/release-notes/#v3192)                                                                                                                      | No             |
| Cilium          | [v1.9.8](https://github.com/cilium/cilium/releases/tag/v1.9.8)                                                                                                                      | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Known Issues
- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.4+rke2r3
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.
-----
# Release v1.21.4+rke2r2
<!-- v1.21.4+rke2r2 -->
This release resolves issue #1724 by adding new vSphere CPI and CSI charts.

**Important Note**

If your server (control-plane) nodes were not started with the `--token` CLI flag or config file key, a randomized token was generated during initial cluster startup. This key is used both for joining new nodes to the cluster, and for encrypting cluster bootstrap data within the datastore. Ensure that you retain a copy of this token, as is required when restoring from backup.

You may retrieve the token value from any server already joined to the cluster:
```bash
cat /var/lib/rancher/rke2/server/token
```

## Changes since v1.21.4+rke2r1

* Updated the vSphere Helm chart versions from 1.0.0 to 100.0.0 adding "control-plane" node label.


## Packaged Component Versions
| Component       | Version                                                                                           |
| --------------- | ------------------------------------------------------------------------------------------------- |
| Kubernetes      | [v1.21.4](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1214) |
| Etcd            | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1)                          |
| Containerd      | [v1.4.8-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.8-k3s1)                      |
| Runc            | [v1.0.0](https://github.com/opencontainers/runc/releases/tag/v1.0.0)                              |
| CNI Plugins     | [v0.8.7](https://github.com/containernetworking/plugins/releases/tag/v0.8.7)                      |
| Metrics-server  | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6)                   |
| CoreDNS         | [v1.8;3](https://github.com/coredns/coredns/releases/tag/v1.8.3)                                  |
| Ingress-Nginx   | [3.34.001](https://github.com/kubernetes/ingress-nginx/releases)                                  |
| Helm-controller | [v0.10.6](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.6)                         |

### Available CNIs
| Component       | Version                                                                                                                                                                             | FIPS Compliant |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Canal (Default) | [Flannel v0.13.0-rancher1](https://github.com/k3s-io/flannel/releases/tag/v0.13.0-rancher1)<br/>[Calico v3.13.3](https://docs.projectcalico.org/archive/v3.13/release-notes/#v3133) | Yes            |
| Calico          | [v3.19.2](https://docs.projectcalico.org/release-notes/#v3192)                                                                                                                      | No             |
| Cilium          | [v1.9.8](https://github.com/cilium/cilium/releases/tag/v1.9.8)                                                                                                                      | No             |
| Multus          | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1)                                                                                                    | No             |

## Known Issues
- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.4+rke2r2
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.

-----
# Release v1.21.4+rke2r1
<!-- v1.21.4+rke2r1 -->
This release updates Kubernetes to v1.21.4, and fixes a number of issues.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1213).

**Important Note**

If your server (control-plane) nodes were not started with the `--token` CLI flag or config file key, a randomized token was generated during initial cluster startup. This key is used both for joining new nodes to the cluster, and for encrypting cluster bootstrap data within the datastore. Ensure that you retain a copy of this token, as is required when restoring from backup.

You may retrieve the token value from any server already joined to the cluster:
```bash
cat /var/lib/rancher/rke2/server/token
```

## Changes since v1.21.3+rke2r1

* Upgrade Kubernetes to v1.21.4 [(#1546)](https://github.com/rancher/rke2/issues/1546)
* Updated Calico to 3.19.2 [(#1693)](https://github.com/rancher/rke2/issues/1693)
* Resolved an issue where pods would fail to deploy if nm-setup-cloud is enabled [(#1670)](https://github.com/rancher/rke2/issues/1670)
* Resolved an issue where restoration fails on etcd only nodes due to invalid state of load balancers [(#1657)](https://github.com/rancher/rke2/issues/1657)
* Resolved an issue with URL pruning when an etcd member would join the cluster [(#1667)](https://github.com/rancher/rke2/issues/1667)
* Resolved an issue where Calico was not processing the ipamconfig correectly [(#1624)](https://github.com/rancher/rke2/issues/1624)
* Allows for the customization of static pod manifests [(#1525)](https://github.com/rancher/rke2/issues/1525)
* Resolved an issue to have RKE2 use the FQDN if cloud provider is set to AWS [(#1618)](https://github.com/rancher/rke2/pull/1618)
* Fixed an issue where the wrong HNS function is being called [(#1604)](https://github.com/rancher/rke2/issues/1604)
* Resolved an issue where S3 snapshots weren't showing in the Rancher UI [(#1551)](https://github.com/rancher/rke2/issues/1551)
* Resolved an issue where a node would become stuck at deletion due to a finalizer [(#1561)](https://github.com/rancher/rke2/issues/1561)
* Add additional annotations to PSPs for Rancher integration [(#1518)](https://github.com/rancher/rke2/issues/1518)
* Resolved an issue where systemd doesn't get notified with "READY" state in etcd nodes [(#1485)](https://github.com/rancher/rke2/issues/1485)
* Resolved an issue where workloads were unable to run with the default Microsoft Pause image [(#1522)](https://github.com/rancher/rke2/issues/1522)
* Added Windows uninstall script [(#1497)](https://github.com/rancher/rke2/issues/1497)
* Resolved an issue where the Windows service fails due to a timeout [(#1499)](https://github.com/rancher/rke2/issues/1499)
* Updated k8s, containerd, hardened build base, and golanglit-ci versions in standard and Windows Dockerfiles [(#1482)](https://github.com/rancher/rke2/issues/1482) [(#1481)](https://github.com/rancher/rke2/issues/1481)
* Resolved an issue where the default deployment of rke2-ingress-nginx had the load balancer service enabled [(#1466)](https://github.com/rancher/rke2/issues/1446)


## Packaged Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.4](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1214) |
| Etcd | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1) |
| Containerd | [v1.4.9-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.9-k3s1) |
| Runc | [v1.0.0](https://github.com/opencontainers/runc/releases/tag/v1.0.0) |
| CNI Plugins | [v0.8.7](https://github.com/containernetworking/plugins/releases/tag/v0.8.7) |
| Metrics-server | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6) |
| CoreDNS | [v1.8;3](https://github.com/coredns/coredns/releases/tag/v1.8.3) |
| Ingress-Nginx | [3.34.001](https://github.com/kubernetes/ingress-nginx/releases) |
| Helm-controller | [v0.10.6](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.6) |

### Available CNIs
| Component | Version | FIPS Compliant |
|---|---|---|
| Canal (Default) | [Flannel v0.13.0-rancher1](https://github.com/k3s-io/flannel/releases/tag/v0.13.0-rancher1)<br/>[Calico v3.13.3](https://docs.projectcalico.org/archive/v3.13/release-notes/#v3133)  | Yes |
| Calico | [v3.19.2](https://docs.projectcalico.org/release-notes/#v3192) | No |
| Cilium | [v1.9.8](https://github.com/cilium/cilium/releases/tag/v1.9.8) | No |
| Multus | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1) | No |

## Known Issues
- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.4+rke2r1
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.

-----
# Release v1.21.3+rke2r1
This release updates Kubernetes to v1.21.3.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1200).  If you are coming from v1.20 or earlier, it is recommended that you read the [Urgent Upgrade Notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#urgent-upgrade-notes).

**Important Note**

If your server (control-plane) nodes were not started with the `--token` CLI flag or config file key, a randomized token was generated during initial cluster startup. This key is used both for joining new nodes to the cluster, and for encrypting cluster bootstrap data within the datastore. Ensure that you retain a copy of this token, as is required when restoring from backup.

You may retrieve the token value from any server already joined to the cluster:
```bash
cat /var/lib/rancher/rke2/server/token
```

## Changes since v1.21.2+rke2r1

* Upgrade Kubernetes to v1.21.3 ([#1421](https://github.com/rancher/rke2/pull/1421))
* Upgrade containerd to v1.4.8-k3s1 ([#1398](https://github.com/rancher/rke2/pull/1398))  
  Addresses [GHSA-c72p-9xmj-rx3w](https://github.com/containerd/containerd/security/advisories/GHSA-c72p-9xmj-rx3w)
* Upgrade runc to v1.0.0 [#1267](https://github.com/rancher/rke2/pull/1267)
* Bootstrap data is now reliably encrypted with the cluster token ([#1428](https://github.com/rancher/rke2/pull/1428))  
  Addresses [GHSA-hvj9-vfxp-c3cf](https://github.com/rancher/rke2/security/advisories/GHSA-hvj9-vfxp-c3cf)
* Experimental support for Windows agents has been added ([#1268](https://github.com/rancher/rke2/pull/1268))
* The nginx ingress controller now uses hardened images ([#1271](https://github.com/rancher/rke2/pull/1271))
* The rke2-kube-proxy chart has been deprecated; kube-proxy now runs as a static pod ([#1205](https://github.com/rancher/rke2/pull/1205))  
  With this change, the `--kube-proxy-args` flag is now supported in RKE2. RKE2 will automatically disable the kube-proxy static pod and retain the legacy rke2-kube-proxy if a rke2-kube-proxy HelmChartConfig resource is detected.
* The RKE2 cloud controller has been moved into a static pod to improve resilience under high datastore latency ([#1216](https://github.com/rancher/rke2/pull/1216))

## Packaged Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.3](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1213) |
| Etcd | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1) |
| Containerd | [v1.4.8-k3s1](https://github.com/k3s-io/containerd/releases/tag/v1.4.8-k3s1) |
| Runc | [v1.0.0](https://github.com/opencontainers/runc/releases/tag/v1.0.0-rc95) |
| CNI Plugins | [v0.8.7](https://github.com/containernetworking/plugins/releases/tag/v0.8.7) |
| Metrics-server | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6) |
| CoreDNS | [v1.6.9](https://github.com/coredns/coredns/releases/tag/v1.6.9) |
| Ingress-Nginx | [3.34.001](https://github.com/kubernetes/ingress-nginx/releases) |
| Helm-controller | [v0.10.1](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.1) |

### Available CNIs
| Component | Version | FIPS Compliant |
|---|---|---|
| Canal (Default) | [Flannel v0.13.0-rancher1](https://github.com/k3s-io/flannel/releases/tag/v0.13.0-rancher1)<br/>[Calico v3.13.3](https://docs.projectcalico.org/archive/v3.13/release-notes/#v3133)  | Yes |
| Calico | [v3.19.1](https://docs.projectcalico.org/release-notes/#v3191) | No |
| Cilium | [v1.9.8](https://github.com/cilium/cilium/releases/tag/v1.9.8) | No |
| Multus | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1) | No |

## Known Issues
- [#1447](https://github.com/rancher/rke2/issues/1447) - When restoring RKE2 from backup to a new node, you should ensure that all pods are stopped following the initial restore:

```bash
curl -sfL https://get.rke2.io | sudo INSTALL_RKE2_VERSION=v1.21.3+rke2r1
rke2 server \
  --cluster-reset \
  --cluster-reset-restore-path=<PATH-TO-SNAPSHOT> --token <token used in the original cluster>
rke2-killall.sh
systemctl enable rke2-server
systemctl start rke2-server
```

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.
-----
# Release v1.21.2+rke2r1
<!-- v1.21.2+rke2r1 -->
This release is RKE2's first in the v1.21 line. This release updates Kubernetes to v1.21.2.

For more details on what's new, see the [Kubernetes release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#changelog-since-v1200).  If you are coming from v1.20 or earlier, it is recommended that you read the [Urgent Upgrade Notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#urgent-upgrade-notes).

This release resolves a number of bugs and provides a number of new features, most notably, the introduction of the `--cni` flag. By default, RKE2 uses Canal as its CNI, which is a combination of Calico and Flannel. Now, with the `--cni` flag, an operator can specify which CNI they want to use. Operators now have the choice of `calico`, `cilium`, and `canal`. The `multus` meta-plugin can also be used in combination with other CNIs by specifying it as the first option in a comma-separated list, for example `--cni=multus,canal`. More on this can be found in the [docs](https://docs.rke2.io/install/network_options/). Note that not all CNIs are FIPS compliant, please see the Available CNIs table for details. 

You can still enable third party CNIs by disabling the default and deploying your own.

Note: With the introduction of addtional CNIs, we have published more image image archives and lists, to allow for fine-grained control of the images needed for air-gap installs. See [the documentation](https://docs.rke2.io/install/airgap/#tarball-method) for more details.

This release includes a number of new subcommands for interacting with etcd snapshots. All of the subcommands are compatible with locally stored snapshots and snapshots stored in S3.
* save - Alias for `rke2 etcd-snaphot`
* prune - Removes snapshots that exceed the configured retention policy
* delete - Deletes a given snapshot
* ls - Lists snapshots

## Resolved Issues and Enhancements

* Added the INSTALL_RKE2_EXEC environment variable as alias for INSTALL_RKE2_TYPE [(#1082)](https://github.com/rancher/rke2/issues/1082)
* Added tolerations to helm charts to enable scheduling on role specific nodes [(#1061)](https://github.com/rancher/rke2/issues/1061)
* Added ability to confirm snapshots are turned off [(#430)](https://github.com/rancher/rke2/issues/430)
* Added systemd notify support [(#989)](https://github.com/rancher/rke2/issues/989)
* Added the ability to pass an alternate encryption config. [(#1105)](https://github.com/rancher/rke2/issues/1105)
* Added tolerations to helm charts to enable scheduling on role specific nodes [(#1061)](https://github.com/rancher/rke2/issues/1061)
* Added support for [vSphere’s out-of-tree cloud provider](https://github.com/kubernetes/cloud-provider-vsphere). Note that this feature was introduced in RKE2 1.20.6, but in this version it can be enabled by passing `--cloud-provider-name=rancher-vsphere`, instead of simply `vsphere`. The implementation from the previous release made it impossible to enable the in-tree vsphere cloud provider. [(#1114)](https://github.com/rancher/rke2/issues/1114)
* Added support for Calico CNI [(#860)](https://github.com/rancher/rke2/issues/860)
* Added support for Multus + sriov CNI [(#746)](https://github.com/rancher/rke2/issues/746)
* Added support for SUSE Enterprise Linux 15 SP3. [(#816)](https://github.com/rancher/rke2/issues/816)
* Updated Cilium to v1.9.8 [(#1099)](https://github.com/rancher/rke2/issues/1099)
* Updated runc to v1.0.0-rc95 [(#977)](https://github.com/rancher/rke2/issues/977)
* Updated ingress nginx version to 3.30.003 [(#884)](https://github.com/rancher/rke2/issues/884)
* Updated Go (GoBoring) to 1.16.4b7 [(#968)](https://github.com/rancher/rke2/pull/986)
* Resolved issue where restoring from snapshot failed with executable file not found in $PATH [(#1059)](https://github.com/rancher/rke2/issues/1059)
* Resolved issue where snapshot and restore wasn't working with the "cluster-reset-restore-path" flag [(#968)](https://github.com/rancher/rke2/issues/968)
* Resolved issue where opa-gatekeeper on rke2 cluster disallows cluster members to join after reboot and stay in NotReady state [(#1054)](https://github.com/rancher/rke2/issues/1054)
* Resolved possible race where bootstrap data might not save [(#1116)](https://github.com/rancher/rke2/issues/1116)
* Resolved an issue where SELinux would block audit logs from being written [(#692)](https://github.com/rancher/rke2/issues/692)
* Resolved an issue where CIS checks for the etcd users where occuring on agents [(#1063)](https://github.com/rancher/rke2/issues/1063)
* Resolved an issue where `kubernetes.default.svc` was not being added to SANs in Kubernetes API serving Cert [(#1112)](https://github.com/rancher/rke2/issues/1112)
* Resolved an issue where helm charts were getting stuck in pending state after upgrade [(#1143)](https://github.com/rancher/rke2/issues/1143)
* Resolved an issue where removing etcd role from a node and restarting RKE2 failed [(#886)](https://github.com/rancher/rke2/issues/886)
* Resolved an issue where rke2 couldn’t start if node hostnames were not resolvable through dns [(#979)](https://github.com/rancher/rke2/issues/979)
* Resolved an issue where the the `--disable-apiserver` flag was inconsistently named. It is now `--disable-api-server`. The old flag remains for backwards compatibility, but is hidden [(#1019)](https://github.com/rancher/rke2/issues/1019)

## Packaged Component Versions
| Component | Version |
|---|---|
| Kubernetes | [v1.21.2](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.21.md#v1212) |
| Etcd | [v3.4.13-k3s1](https://github.com/k3s-io/etcd/releases/tag/v3.4.13-k3s1) |
| Containerd | [v1.4.4-k3s2](https://github.com/k3s-io/containerd/releases/tag/v1.4.4-k3s2) |
| Runc | [v1.0.0-rc95](https://github.com/opencontainers/runc/releases/tag/v1.0.0-rc95) |
| CNI Plugins | [v0.8.7](https://github.com/containernetworking/plugins/releases/tag/v0.8.7) |
| Metrics-server | [v0.3.6](https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.3.6) |
| CoreDNS | [v1.6.9](https://github.com/coredns/coredns/releases/tag/v1.6.9) |
| Ingress-Nginx | [3.30.003](https://github.com/kubernetes/ingress-nginx/releases) |
| Helm-controller | [v0.10.1](https://github.com/k3s-io/helm-controller/releases/tag/v0.10.1) |

### Available CNIs
| Component | Version | FIPS Compliant |
|---|---|---|
| Canal (Default) | [Flannel v0.13.0-rancher1](https://github.com/k3s-io/flannel/releases/tag/v0.13.0-rancher1)<br/>[Calico v3.13.3](https://docs.projectcalico.org/archive/v3.13/release-notes/#v3133)  | Yes |
| Calico | [v3.19.1](https://docs.projectcalico.org/release-notes/#v3191) | No |
| Cilium | [v1.9.8](https://github.com/cilium/cilium/releases/tag/v1.9.8) | No |
| Multus | [v3.7.1](https://github.com/k8snetworkplumbingwg/multus-cni/releases/tag/v3.7.1) | No |

## Known Issues
- [#786](https://github.com/rancher/rke2/issues/786) - NetworkManager interferes with network related components. If your node has NetworkManager installed and enabled, please refer to the [RKE2 Docs](https://docs.rke2.io/known_issues/#networkmanager) for a workaround.
- [#1009](https://github.com/rancher/rke2/issues/1009) - RKE2 integrated cloud-controller-manager RBAC conflicts with out-of-tree Helm charts. RBAC roles have been renamed to no longer conflict, but if you are upgrading from an earlier release and plan on installing an out-of-tree cloud controller you should run the following command to clean up the legacy roles:

    ```sh
    kubectl delete clusterrole,clusterrolebinding cloud-controller-manager
    ```

## Helpful Links
As always, we welcome and appreciate feedback from our community of users. Please feel free to:
- [Open issues here](https://github.com/rancher/rke2/issues/new)
- [Join our Slack channel](https://slack.rancher.io/)
- [Check out our documentation](https://docs.rke2.io) for guidance on how to get started.

-----
